<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Magma · Magma</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;magma&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#magma&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Magma&lt;/h1&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Magma · Magma"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebookincubator.github.io/web/"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;magma&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#magma&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Magma&lt;/h1&gt;
"/><meta property="og:image" content="https://facebookincubator.github.io/web/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://facebookincubator.github.io/web/img/docusaurus.png"/><link rel="shortcut icon" href="/web/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/web/css/main.css"/><script src="/web/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/web/"><img class="logo" src="/web/img/fb.png" alt="Magma"/><h2 class="headerTitleWithLogo">Magma</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/web/docs/overview" target="_self">Docs</a></li><li class=""><a href="/web/help" target="_self">Help</a></li><li class=""><a href="https://github.com/facebookincubator/magma" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Magma</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Magma<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/web/docs/overview">Magma</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Orchestrator<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/web/docs/orc8r/docker_setup">Docker Setup</a></li><li class="navListItem"><a class="navItem" href="/web/docs/orc8r/nms_setup">Setting up the NMS</a></li><li class="navListItem"><a class="navItem" href="/web/docs/orc8r/testing">Testing</a></li><li class="navListItem"><a class="navItem" href="/web/docs/orc8r/remote_cli">Orchestrator Remote CLI</a></li><li class="navListItem"><a class="navItem" href="/web/docs/orc8r/rest_apis">Swagger UI for REST APIs</a></li><li class="navListItem"><a class="navItem" href="/web/docs/orc8r/generic_commands">Generic commands framework</a></li><li class="navListItem"><a class="navItem" href="/web/docs/orc8r/packer">Packer Build</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Access Gateway<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/web/docs/lte/readme_agw">Services/Sub-Components</a></li><li class="navListItem"><a class="navItem" href="/web/docs/lte/s1ap_tests">S1AP Integration Tests</a></li><li class="navListItem"><a class="navItem" href="/web/docs/lte/enodebd">eNodeB Configuration</a></li><li class="navListItem"><a class="navItem" href="/web/docs/lte/redirectd">Redirection</a></li><li class="navListItem"><a class="navItem" href="/web/docs/lte/pipelined">Pipelined</a></li><li class="navListItem"><a class="navItem" href="/web/docs/lte/pipelined_tests">Pipelined testing framework</a></li><li class="navListItem"><a class="navItem" href="/web/docs/lte/readme_callflow">Building the callflow</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Federated Gateway<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/web/docs/feg/readme">Overview</a></li><li class="navListItem"><a class="navItem" href="/web/docs/feg/deployment">Packaging, Deployment, and Upgrades</a></li><li class="navListItem"><a class="navItem" href="/web/docs/feg/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/web/docs/feg/docker_setup">FeG Docker Setup</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">How To<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/web/docs/howtos/configurations">Configurations</a></li><li class="navListItem"><a class="navItem" href="/web/docs/howtos/readme_package">Packaging</a></li><li class="navListItem"><a class="navItem" href="/web/docs/howtos/docusaurus">Docusaurus</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="magma"></a><a href="#magma" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Magma</h1>
<p>Magma is an open-source software platform that gives network operators an open, flexible and extendable mobile core network solution. Magma enables better connectivity by:</p>
<ul>
<li>Allowing operators to offer cellular service without vendor lock-in with a modern, open source core network</li>
<li>Enabling operators to manage their networks more efficiently with more automation, less downtime, better predictability, and more agility to add new services and applications</li>
<li>Enabling federation between existing MNOs and new infrastructure providers for expanding rural infrastructure</li>
<li>Allowing operators who are constrained with licensed spectrum to add capacity and reach by using Wi-Fi and CBRS</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="magma-architecture"></a><a href="#magma-architecture" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Magma Architecture</h2>
<p>The figure below shows the high-level Magma architecture. Magma is 3GPP generation (2G, 3G, 4G or upcoming 5G networks) and access network agnostic (cellular or WiFi). It can flexibly support a radio access network with minimal development and deployment effort.</p>
<p>Magma has three major components:</p>
<ul>
<li><p><strong>Access Gateway:</strong> The Access Gateway (AGW) provides network services and policy enforcement. In an LTE network, the AGW implements an evolved packet core (EPC), and a combination of an AAA and a PGW. It works with existing, unmodified commercial radio hardware.</p></li>
<li><p><strong>Orchestrator:</strong> Orchestrator is a cloud service that provides a simple and consistent way to configure and monitor the wireless network securely. The Orchestrator can be hosted on a public/private cloud. The metrics acquired through the platform allows you to see the analytics and traffic flows of the wireless users through the Magma web UI.</p></li>
<li><p><strong>Federation Gateway:</strong> The Federation Gateway integrates the MNO core network with Magma by using standard 3GPP interfaces to existing MNO components.  It acts as a proxy between the Magma AGW and the operator's network and facilitates core functions, such as authentication, data plans, policy enforcement, and charging to stay uniform between an existing MNO network and the expanded network with Magma.</p></li>
</ul>
<p><img src="/web/docs/assets/magma_overview.png?raw=true" alt="Magma architecture diagram" title="Magma Architecture"></p>
<h2><a class="anchor" aria-hidden="true" id="developer-prereqs"></a><a href="#developer-prereqs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Developer Prereqs</h2>
<p>We develop all components of the system on virtual machines managed by
<a href="https://www.vagrantup.com/">Vagrant</a>. This helps us ensure that every
developer has a consistent development for cloud and gateway development. We
support macOS and Linux host operating systems, and developing on Windows
should be possible but has not been tested.</p>
<p>First, install <a href="https://www.virtualbox.org/wiki/Downloads">Virtualbox</a> and
<a href="http://www.vagrantup.com/downloads.html">Vagrant</a> so you can set up your
development VMs.</p>
<p>Then, install some additional prereqs (replace <code>brew</code> with your OS-appropriate
package manager as necessary):</p>
<pre><code class="hljs css language-console"><span class="hljs-meta">$</span><span class="bash"> brew install python3</span>
<span class="hljs-meta">$</span><span class="bash"> pip3 install ansible fabric3 requests</span>
<span class="hljs-meta">$</span><span class="bash"> vagrant plugin install vagrant-vbguest</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="running-the-system"></a><a href="#running-the-system" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running the System</h2>
<p>With the prereqs out of the way, we can now set up a minimal end-to-end system
on your development environment. In this README, we'll start by running the
LTE access gateway and orchestrator cloud inside their development VM's, and
registering your local access gateway with your local cloud for management.</p>
<p>We will be spinning up 3 virtual machines for this full setup, so you'll
probably want to do this on a system with at least 8GB of memory. Our
development VM's are in the 192.168.80.0/24 address space, so make sure that
you don't have anything running which hijacks that (e.g. VPN).</p>
<p>In the following steps, note the prefix in terminal commands. <code>HOST</code> means to
run the indicated command on your host machine, <code>CLOUD-VM</code> on the <code>cloud</code>
vagrant machine under <code>orc8r/cloud</code>, and <code>MAGMA-VM</code> on the <code>magma</code> vagrant
machine under <code>lte/gateway</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="provisioning-the-virtual-machines"></a><a href="#provisioning-the-virtual-machines" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Provisioning the Virtual Machines</h4>
<p>Go ahead and open up 2 fresh terminal tabs. Start in</p>
<h5><a class="anchor" aria-hidden="true" id="terminal-tab-1"></a><a href="#terminal-tab-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Terminal Tab 1:</h5>
<p>We'll be setting up the LTE access gateway VM here.</p>
<pre><code class="hljs css language-console">HOST [magma]$ cd lte/gateway
HOST [magma/lte/gateway]$ vagrant up
</code></pre>
<p>This will take a few minutes. Switch over to</p>
<h5><a class="anchor" aria-hidden="true" id="terminal-tab-2"></a><a href="#terminal-tab-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Terminal Tab 2:</h5>
<p>Here, we'll be setting up the orchestrator cloud and datastore VMs. The datastore VM runs a PostgreSQL instance.</p>
<pre><code class="hljs css language-console">HOST [magma]$ cd orc8r/cloud
HOST [magma/orc8r/cloud]$ vagrant up datastore
HOST [magma/orc8r/cloud]$ vagrant up cloud
</code></pre>
<p>An Ansible error about a <code>.cache/test_certs</code> directory being missing is benign.
If you see an error early on about VirtualBox guest additions failing to
install, you have a few extra steps to take after the provisioning fails:</p>
<pre><code class="hljs css language-console">HOST [magma/orc8r/cloud]$ vagrant reload cloud
HOST [magma/orc8r/cloud]$ vagrant provision cloud
</code></pre>
<p>This will re-run the Ansible provisioning. It'll be a lot quicker this time
around since most of the steps will be skipped.</p>
<h4><a class="anchor" aria-hidden="true" id="initial-build"></a><a href="#initial-build" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initial Build</h4>
<p>Once all those jobs finish (should only be 5 minutes or so), we can build the
code for the first time and run it. Start in</p>
<h5><a class="anchor" aria-hidden="true" id="terminal-tab-1-1"></a><a href="#terminal-tab-1-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Terminal Tab 1:</h5>
<pre><code class="hljs css language-console">HOST [magma/lte/gateway]$ vagrant ssh
MAGMA-VM [/home/vagrant]$ cd magma/lte/gateway
MAGMA-VM [/home/vagrant/magma/lte/gateway]$ make run
</code></pre>
<p>This will take a while (we have a lot of CXX files to build). It's a good time
to switch over to</p>
<h5><a class="anchor" aria-hidden="true" id="terminal-tab-2-1"></a><a href="#terminal-tab-2-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Terminal Tab 2:</h5>
<p>Here, we'll build and run all of our orchestrator cloud services. We'll also
use this time to register the client certificate you'll need to access the API
gateway for the controller running on your cloud VM.</p>
<pre><code class="hljs css language-console">HOST [magma/orc8r/cloud]$ vagrant ssh
CLOUD-VM [/home/vagrant]$ cd magma/orc8r/cloud
CLOUD-VM [/home/vagrant/magma/orc8r/cloud]$ make run
</code></pre>
<p>Again, this will take a while. While both these builds are churning, it's a
good time to grab lunch, or a coffee.</p>
<p>If you're reading this because you recently nuked your VMs, you have one more
thing to do. This <code>magma/.cache</code> folder stays around even when you destroy
your VMs. But if you're starting with a blank datastore VM, the cert that
your browser has isn't registered with the system anymore
(you deleted those tables). We have a Make target that will re-register the
cached test cert with your datastore VM:</p>
<pre><code class="hljs css language-console">CLOUD-VM [/home/vagrant]$ cd magma/orc8r/cloud
CLOUD-VM [/home/vagrant/magma/orc8r/cloud]$ make restore_admin_operator
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="connecting-your-local-lte-gateway-to-your-local-cloud"></a><a href="#connecting-your-local-lte-gateway-to-your-local-cloud" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connecting Your Local LTE Gateway to Your Local Cloud</h4>
<p>At this point, you will have built all the code in the LTE access gateway and
the orchestrator cloud. All the services on the LTE access gateway and
orchestrator cloud are running, but your gateway VM isn't yet set up to
communicate with your local cloud VM.</p>
<p>We have a fabric command set up to do this:</p>
<pre><code class="hljs css language-console">HOST [magma]$ cd lte/gateway
HOST [magma/lte/gateway]$ fab register_vm
</code></pre>
<p>At this point, your access gateway VM is streaming configuration from your
cloud VM and sending status and metrics back to your cloud VM.</p>
<p>If you want to see what the access gateway is doing, you can
<code>vagrant ssh magma</code> inside <code>lte/gateway</code>, then do a
<code>sudo tail -f /var/log/syslog</code>. If everything above went smoothly, you should
eventually (give it a minute or two) see something along the lines of:</p>
<pre><code class="hljs css language-console"><span class="hljs-meta">MAGMA-VM$</span><span class="bash"> sudo service magma@* stop</span>
<span class="hljs-meta">MAGMA-VM$</span><span class="bash"> sudo service magma@magmad restart</span>
<span class="hljs-meta">MAGMA-VM$</span><span class="bash"> sudo tail -f /var/<span class="hljs-built_in">log</span>/syslog</span>
Sep 27 22:57:35 magma-dev magmad[6226]: [2018-09-27 22:57:35,550 INFO root] Checkin Successful!
Sep 27 22:57:55 magma-dev magmad[6226]: [2018-09-27 22:57:55,684 INFO root] Processing config update g1
Sep 27 22:57:55 magma-dev control_proxy[6418]: 2018-09-27T22:57:55.683Z [127.0.0.1 -&gt; streamer-controller.magma.test,8443] "POST /magma.Streamer/GetUpdates HTTP/2" 200 7bytes 0.009s
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="using-the-nms-ui"></a><a href="#using-the-nms-ui" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using the NMS UI</h4>
<p>Magma provides an UI for configuring and monitoring the networks. To run the UI, first install <a href="https://www.docker.com/">Docker</a> in your host. Then:</p>
<pre><code class="hljs css language-console">HOST [magma]$ cd nms/fbcnms-projects/magmalte
HOST [magma/nms/fbcnms-projects/magmalte] $
docker-compose up -d
HOST [magma/nms/fbcnms-projects/magmalte] $
docker-compose run magmalte yarn run setAdminPassword admin@magma.test password1234
</code></pre>
<p>After this, you will be able to access the UI by visiting <a href="https://localhost">https://localhost</a>, and using the email <code>admin@magma.test</code> and password <code>password1234</code>. If you see Gateway Error 502, don't worry, the NMS can take upto 60 seconds to finish starting up.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-next button" href="/web/docs/orc8r/docker_setup"><span>Docker Setup</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#magma-architecture">Magma Architecture</a></li><li><a href="#developer-prereqs">Developer Prereqs</a></li><li><a href="#running-the-system">Running the System</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/web/" class="nav-home"><img src="/web/img/fb.png" alt="Magma" width="66" height="58"/></a><div><h5>Docs</h5><a href="https://github.com/facebookincubator/magma/blob/master/docs/Magma_Product_Overview.pdf">Magma Product Overview</a><a href="https://github.com/facebookincubator/magma/blob/master/docs/Magma_Specs_V1.1.pdf">Magma Spec</a><a href="https://github.com/facebookincubator/magma/blob/master/docs/Magma_Deployment_Guide_Installing_Magma_V2.pdf">Magma Install Guide</a><a href="https://github.com/facebookincubator/magma/blob/master/docs/Magma_Network_Management_System.pdf">Magma Network Management System</a></div><div><h5>Community</h5><a href="https://discord.gg/4YxZbft">Discord</a><a href="https://groups.google.com/forum/#!forum/magma-dev">Forum</a><a href="http://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="https://code.fb.com/open-source/magma/">Blog</a><a href="https://github.com/facebookincubator/magma">GitHub</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/web/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 Facebook</section></footer></div></body></html>