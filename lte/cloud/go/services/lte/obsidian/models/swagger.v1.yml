---
swagger: '2.0'

magma-gen-meta:
  go-package: magma/lte/cloud/go/services/lte/obsidian/models
  dependencies:
    - 'orc8r/cloud/go/models/swagger-common.yml'
    - 'orc8r/cloud/go/services/orchestrator/obsidian/models/swagger.v1.yml'
    - 'lte/cloud/go/services/policydb/obsidian/models/swagger.v1.yml'
  temp-gen-filename: lte-swagger.yml
  output-dir: lte/cloud/go/services/lte/obsidian
  types:
    - go-struct-name: LteNetwork
      filename: lte_network_swaggergen.go
    - go-struct-name: NetworkCellularConfigs
      filename: network_cellular_configs_swaggergen.go
    - go-struct-name: NetworkRanConfigs
      filename: network_ran_configs_swaggergen.go
    - go-struct-name: NetworkEpcConfigs
      filename: network_epc_configs_swaggergen.go
    - go-struct-name: EnodebSerials
      filename: enodeb_serials_swaggergen.go
    - go-struct-name: GatewayCellularConfigs
      filename: gateway_cellular_configs_swaggergen.go
    - go-struct-name: GatewayEpcConfigs
      filename: gateway_epc_configs_swaggergen.go
    - go-struct-name: GatewayNonEpsConfigs
      filename: gateway_non_eps_configs_swaggergen.go
    - go-struct-name: GatewayDNSConfigs
      filename: gateway_dns_configs_swaggergen.go
    - go-struct-name: GatewayDNSRecords
      filename: gateway_dns_records_swaggergen.go
    - go-struct-name: DNSConfigRecord
      filename: dns_config_record_swaggergen.go
    - go-struct-name: LteGateway
      filename: lte_gateway_swaggergen.go
    - go-struct-name: MutableLteGateway
      filename: mutable_lte_gateway_swaggergen.go
    - go-struct-name: Enodeb
      filename: enodeb_swaggergen.go
    - go-struct-name: EnodebConfig
      filename: enodeb_config_swaggergen.go
    - go-struct-name: EnodebConfiguration
      filename: enodeb_configuration_swaggergen.go
    - go-struct-name: UnmanagedEnodebConfiguration
      filename: unmanaged_enodeb_configuration_swaggergen.go
    - go-struct-name: EnodebState
      filename: enodeb_state_swaggergen.go
    - go-struct-name: AggregatedMaximumBitrate
      filename: aggregated_maximum_bitrate_swaggergen.go
    - go-struct-name: QoSProfile
      filename: qos_profile_swaggergen.go
    - go-struct-name: APNConfiguration
      filename: apn_configuration_swaggergen.go
    - go-struct-name: APNName
      filename: apn_name_swaggergen.go
    - go-struct-name: APN
      filename: apn_swaggergen.go


info:
  title: LTE Network Management
  description: LTE REST APIs
  version: 1.0.0

basePath: /magma/v1

tags:
  - name: EnodeBs
    description: eNodeB devices attached to the network
  - name: LTE Networks
    description: Endpoints related to LTE networks
  - name: LTE Gateways
    description: Endpoints related to LTE gateway management
  - name: Policies
    description: Endpoints related to network policy management
  - name: Rating Groups
    description: Endpoints related to rating group management

paths:
  /lte:
    get:
      summary: List all LTE network IDs
      tags:
        - LTE Networks
      responses:
        '200':
          description: List of LTE network IDs
          schema:
            type: array
            items:
              type: string
            example:
              - lte_network1
              - lte_network2
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Create a new LTE network
      tags:
        - LTE Networks
      parameters:
        - name: lte_network
          in: body
          description: Configuration of the network to create
          required: true
          schema:
            $ref: '#/definitions/lte_network'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}:
    get:
      summary: Describe an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Full description of an LTE network
          schema:
            $ref: '#/definitions/lte_network'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update an entire LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: lte_network
          in: body
          description: Full desired configuration of the network
          required: true
          schema:
            $ref: '#/definitions/lte_network'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Delete an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/name:
    get:
      summary: Get name of an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Name of the network
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/network_name'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the name of an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: name
          in: body
          description: New name for the network
          required: true
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/network_name'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/description:
    get:
      summary: Get description of an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Description of the network
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/network_description'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the description of an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: description
          in: body
          description: New name for the network
          required: true
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/network_description'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/cellular:
    get:
      summary: Get cellular configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Cellular configuration of the network
          schema:
            $ref: '#/definitions/network_cellular_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update cellular configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New cellular configuration for the network
          required: true
          schema:
            $ref: '#/definitions/network_cellular_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/cellular/epc:
    get:
      summary: Get EPC configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: EPC configuration of the network
          schema:
            $ref: '#/definitions/network_epc_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update EPC configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New EPC configuration for the network
          required: true
          schema:
            $ref: '#/definitions/network_epc_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/cellular/ran:
    get:
      summary: Get RAN configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: RAN configuration of the network
          schema:
            $ref: '#/definitions/network_ran_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update RAN configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New RAN configuration for the network
          required: true
          schema:
            $ref: '#/definitions/network_ran_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/cellular/feg_network_id:
    get:
      summary: Get Federation Gateway network ID for the network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: ID of the Federation Gateway network
          schema:
            type: string
            example: feg_network
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the Federation Gateway network ID
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: feg_network_id
          in: body
          description: Desired federation gateway network ID
          required: true
          schema:
            type: string
            example: feg_network
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config:
    get:
      summary: Get a network-wide subscriber config
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Subscriber Config
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/network_subscriber_config'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update a network-wide subscriber config
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: record
          in: body
          description: Subscriber Config for the Network
          required: true
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/network_subscriber_config'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config/rule_names:
    get:
      summary: Get network-wide rule names
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Subscriber Config
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/rule_names'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update network-wide rule names
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: record
          in: body
          description: Subscriber Config for the Network
          required: true
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/rule_names'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config/rule_names/{rule_id}:
    post:
      summary: Add a network-wide rule name
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './lte-policydb-swagger.yml#/parameters/rule_id'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Add a network-wide rule name
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './lte-policydb-swagger.yml#/parameters/rule_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config/base_names:
    get:
      summary: Get network-wide base names
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Subscriber Config
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/base_names'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update network-wide base names
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: record
          in: body
          description: Subscriber Config for the Network
          required: true
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/base_names'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config/base_names/{base_name}:
    post:
      summary: Add a network-wide base name
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './lte-policydb-swagger.yml#/parameters/base_name'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Add a network-wide base name
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './lte-policydb-swagger.yml#/parameters/base_name'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/dns:
    get:
      summary: Get DNS configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: DNS configuration of the network
          schema:
            $ref: './orc8r-swagger.yml#/definitions/network_dns_config'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update DNS configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New DNS configuration for the network
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/network_dns_config'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/dns/records:
    get:
      summary: Get the DNS config records for the LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Custom DNS records for the network
          schema:
            type: array
            items:
              $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

    put:
      summary: Change all the DNS records for the LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: records
          in: body
          description: Custom DNS records for the network
          required: true
          schema:
            type: array
            items:
              $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/dns/records/{domain}:
    get:
      summary: Get the DNS config record for a specific domain
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger.yml#/parameters/dns_domain'
      responses:
        '200':
          description: DNS config record
          schema:
            $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Create a DNS record for a specific domain
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger.yml#/parameters/dns_domain'
        - name: record
          in: body
          description: Custom DNS record for the domain
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update a DNS record for a specific domain
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger.yml#/parameters/dns_domain'
        - name: record
          in: body
          description: Custom DNS record for the domain
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Delete the DNS record for a specific domain
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger.yml#/parameters/dns_domain'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/features:
    get:
      summary: Get feature flags for LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Feature flags of the network
          schema:
            $ref: './orc8r-swagger.yml#/definitions/network_features'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update feature flags for LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New feature flags for the network
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/network_features'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways:
    get:
      summary: List all gateways for an LTE network
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Map of all LTE gateways inside the network by gatewayID
          schema:
            type: object
            additionalProperties:
              $ref: '#/definitions/lte_gateway'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Register a new LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: gateway
          in: body
          description: Full desired configuration of the gateway
          required: true
          schema:
            $ref: '#/definitions/mutable_lte_gateway'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}:
    get:
      summary: Get a specific LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The requested LTE gateway
          schema:
            $ref: '#/definitions/lte_gateway'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update an entire LTE gateway record
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: gateway
          in: body
          description: Full desired configuration of the gateway
          required: true
          schema:
            $ref: '#/definitions/mutable_lte_gateway'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Delete an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/name:
    get:
      summary: Get the name of an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The name of the gateway
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/gateway_name'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the name of an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: name
          in: body
          required: true
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/gateway_name'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/description:
    get:
      summary: Get the description of an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The description of the gateway
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/gateway_description'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the description of an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: description
          in: body
          required: true
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/gateway_description'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/device:
    get:
      summary: Get the physical device for an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The physical device for the gateway
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_device'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the physical device for an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: device
          in: body
          description: New device for the LTE gateway
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_device'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/magmad:
    get:
      summary: Get magmad agent configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: Magmad agent configuration
          schema:
            $ref: './orc8r-swagger.yml#/definitions/magmad_gateway_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Reconfigure magmad agent
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: magmad
          in: body
          description: New magmad configuration
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/magmad_gateway_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular:
    get:
      summary: Get gateway cellular configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: Cellular configuration
          schema:
            $ref: '#/definitions/gateway_cellular_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway cellular configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New cellular configuration
          required: true
          schema:
            $ref: '#/definitions/gateway_cellular_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/ran:
    get:
      summary: Get gateway RAN configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: RAN configuration
          schema:
            $ref: '#/definitions/gateway_ran_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway RAN configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New RAN configuration
          required: true
          schema:
            $ref: '#/definitions/gateway_ran_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/epc:
    get:
      summary: Get gateway EPC configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: EPC configuration
          schema:
            $ref: '#/definitions/gateway_epc_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway EPC configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New EPC configuration
          required: true
          schema:
            $ref: '#/definitions/gateway_epc_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/non_eps:
    get:
      summary: Get gateway Non-EPS configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: Non-EPS configuration
          schema:
            $ref: '#/definitions/gateway_non_eps_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway Non-EPS configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New Non-EPS configuration
          required: true
          schema:
            $ref: '#/definitions/gateway_non_eps_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/dns:
    get:
      summary: Get DNS configuration of LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: DNS configuration of the gateway
          schema:
            $ref: '#/definitions/gateway_dns_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update DNS configuration of LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New DNS configuration for the gateway
          required: true
          schema:
            $ref: '#/definitions/gateway_dns_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/dns/records:
    get:
      summary: Get the DNS config records for LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: Custom DNS records for the gateway
          schema:
            type: array
            items:
              $ref: '#/definitions/dns_config_record'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Change all the DNS records for LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: records
          in: body
          description: Custom DNS records for the gateway
          required: true
          schema:
            type: array
            items:
              $ref: '#/definitions/dns_config_record'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/connected_enodeb_serials:
    get:
      summary: Get the SNs of all enodeBs connected to a gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The SNs of all enodeBs
          schema:
            $ref: '#/definitions/enodeb_serials'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Add a new connected enodeB to a gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: serial
          in: body
          required: true
          schema:
            type: string
            minLength: 1
            example: 'SN1234567890'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the set of connected enodeBs
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: serials
          in: body
          required: true
          schema:
            $ref: '#/definitions/enodeb_serials'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Remove an enodeB from the connected devices list
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: serial
          in: body
          required: true
          schema:
            type: string
            minLength: 1
            example: 'SN1234567890'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/tier:
    get:
      summary: Get the ID of the upgrade tier a gateway belongs to
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The ID of the upgrade tier
          schema:
            $ref: './orc8r-swagger.yml#/definitions/tier_id'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the ID of the upgrade tier a gateway belongs to
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: tier_id
          in: body
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/tier_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/status:
    get:
      summary: Get the status of a gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The status of the gateway
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_status'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/vpn:
    get:
      summary: Get the gateway VPN configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The current VPN gateway config
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_vpn_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the gateway VPN configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New VPN configuration
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_vpn_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/enodebs:
    get:
      summary: List all enodeBs in the network
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: All enodeBs registered in the network
          schema:
            type: object
            additionalProperties:
              $ref: '#/definitions/enodeb'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Register a new enodeB
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: enodeb
          in: body
          description: Configuration of the enodeB
          required: true
          schema:
            $ref: '#/definitions/enodeb'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/enodebs/{enodeb_serial}:
    get:
      summary: Retrieve a specific enodeB configuration
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/enodeb_serial'
      responses:
        '200':
          description: The requested enodeB's configuration
          schema:
            $ref: '#/definitions/enodeb'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update an enodeB's configuration
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/enodeb_serial'
        - name: enodeb
          in: body
          description: Desired configuration of the enodeB
          required: true
          schema:
            $ref: '#/definitions/enodeb'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Unregister an enodeB
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/enodeb_serial'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/enodebs/{enodeb_serial}/state:
    get:
      summary: Retrieve reported state from enodeb device
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/enodeb_serial'
      responses:
        '200':
          description: The requested enodeB's configuration
          schema:
            $ref: '#/definitions/enodeb_state'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/apns:
    get:
      summary: List APNs in the network
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: List of all the APNs in the network
          schema:
            type: object
            additionalProperties:
              $ref: '#/definitions/apn'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Add a new APN to the network
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - in: body
          name: apn
          description: New APN configuration
          required: true
          schema:
            $ref: '#/definitions/apn'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/apns/{apn_name}:
    get:
      summary: Retrieve the APN info
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/apn_name'
      responses:
        '200':
          description: APN Info
          schema:
            $ref: '#/definitions/apn'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update an existing APN in the network
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/apn_name'
        - in: body
          name: apn
          description: New APN configuration
          required: true
          schema:
            $ref: '#/definitions/apn'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Remove an APN from the network
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/apn_name'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

parameters:
  enodeb_serial:
    in: path
    name: enodeb_serial
    description: EnodeB serial number
    required: true
    type: string

  apn_name:
    in: path
    name: apn_name
    description: Access Point Name
    required: true
    type: string

definitions:
  lte_network:
    type: object
    description: LTE Network spec
    required:
      - id
      - name
      - description
      - cellular
      - dns
    properties:
      id:
        $ref: './orc8r-swagger-common.yml#/definitions/network_id'
      name:
        $ref: './orc8r-swagger-common.yml#/definitions/network_name'
      description:
        $ref: './orc8r-swagger-common.yml#/definitions/network_description'
      cellular:
        $ref: '#/definitions/network_cellular_configs'
      dns:
        $ref: './orc8r-swagger.yml#/definitions/network_dns_config'
      features:
        $ref: './orc8r-swagger.yml#/definitions/network_features'
      subscriber_config:
        $ref: './lte-policydb-swagger.yml#/definitions/network_subscriber_config'

  network_cellular_configs:
    description: Cellular configuration for a network
    type: object
    required:
      - ran
      - epc
    minLength: 1
    properties:
      ran:
        $ref: '#/definitions/network_ran_configs'
      epc:
        $ref: '#/definitions/network_epc_configs'
      feg_network_id:
       $ref: '#/definitions/feg_network_id'

  feg_network_id:
    type: string
    example: 'example_feg_network'

  network_ran_configs:
    description: RAN (radio access network) cellular configuration for a network
    type: object
    minLength: 1
    required:
      # fdd/tdd config is a one-of, not supported by swagger spec so leaving
      # out of required fields
      # Technically fdd/tdd operation is determined by earfcndl value
      # See lte_bands.go for an incomplete mapping
      - bandwidth_mhz
    properties:
      bandwidth_mhz:
        type: integer
        format: uint32
        example: 20
        enum:
          - 3
          - 5
          - 10
          - 15
          - 20
        x-nullable: false
      fdd_config:
        type: object
        x-go-custom-tag: 'magma_alt_name:"NetworkRANConfigFDDConfig"'
        required:
          - earfcndl
          - earfcnul
        properties:
          earfcndl:
            type: integer
            format: uint32
            example: 0
            x-nullable: false
          earfcnul:
            type: integer
            format: uint32
            minimum: 0
            exclusiveMinimum: true
            example: 18000
            x-nullable: false
      tdd_config:
        type: object
        x-go-custom-tag: 'magma_alt_name:"NetworkRANConfigTDDConfig"'
        required:
          - earfcndl
          - subframe_assignment
          - special_subframe_pattern
        properties:
          earfcndl:
            type: integer
            format: uint32
            example: 44590
            x-nullable: false
          subframe_assignment:
            type: integer
            format: uint32
            example: 2
            maximum: 6
            x-nullable: false
          special_subframe_pattern:
            type: integer
            format: uint32
            example: 7
            maximum: 9
            x-nullable: false

  network_epc_configs:
    description: EPC (evolved packet core) cellular configuration for a network
    type: object
    minLength: 1
    required:
      - lte_auth_amf
      - lte_auth_op
      - mcc
      - mnc
      - hss_relay_enabled
      - gx_gy_relay_enabled
      - tac
    properties:
      mcc:
        type: string
        pattern: '^(\d{3})$'
        example: '001'
        x-nullable: false
      mnc:
        type: string
        pattern: '^(\d{2,3})$'
        example: '01'
        x-nullable: false
      tac:
        type: integer
        format: uint32
        minimum: 1
        maximum: 65535
        example: 1
        x-nullable: false
      lte_auth_op:
        type: string
        format: byte
        example: EREREREREREREREREREREQ==
        minLength: 15
        maxLength: 16
        x-nullable: false
      lte_auth_amf:
        type: string
        format: byte
        x-nullable: false
        example: gAA=
      sub_profiles:
        type: object
        additionalProperties:
          type: object
          required:
            - max_ul_bit_rate
            - max_dl_bit_rate
          properties:
            max_ul_bit_rate:
              type: integer
              format: uint64
              minimum: 0
              exclusiveMinimum: true
              x-nullable: false
              example: 100000000
            max_dl_bit_rate:
              type: integer
              format: uint64
              minimum: 0
              exclusiveMinimum: true
              x-nullable: false
              example: 20000000
      default_rule_id:
        type: string
        example: 'default_rule_1'
      hss_relay_enabled:
        type: boolean
        example: false
      gx_gy_relay_enabled:
        type: boolean
        example: false
      cloud_subscriberdb_enabled:
        type: boolean
        example: false
      network_services:
        description: Configuration for network services. Services will be instantiated in the listed order.
        type: array
        x-omitempty: true
        items:
          type: string
          enum:
            - 'dpi'
            - 'policy_enforcement'
        example:
          - 'policy_enforcement'
      mobility:
        type: object
        description: Configuration for IP Allocation (Mobility).
        required:
          - ip_allocation_mode
        properties:
          ip_allocation_mode:
            type: string
            x-nullable: false
            enum:
              - 'NAT'
              - 'STATIC'
              - 'DHCP_PASSTHROUGH'
              - 'DHCP_BROADCAST'
            example: 'NAT'
          enable_static_ip_assignments:
            type: boolean
            example: true
          enable_multi_apn_ip_allocation:
            type: boolean
            example: true
          reserved_addresses:
            type: array
            items:
              type: string
              format: ipv4
              example: 192.168.0.1
          nat:
            type: object
            properties:
              ip_blocks:
                type: array
                items:
                  type: string
                  minLength: 5
                  maxLength: 49
                  example: '192.168.0.0/16'
          static:
            type: object
            properties:
              ip_blocks_by_tac:
                type: object
                additionalProperties:
                  type: array
                  items:
                    type: string
                    minLength: 5
                    maxLength: 49
                example:
                  1: ['192.168.0.0/16']
                  2: ['172.10.0.0/16', '172.20.0.0/16']

  lte_gateway:
    type: object
    description: Full description of an LTE gateway
    required:
      - device
      - id
      - name
      - description
      - magmad
      - tier
      - cellular
      - connected_enodeb_serials
    properties:
      device:
        $ref: './orc8r-swagger.yml#/definitions/gateway_device'
      id:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_id'
      name:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_name'
      description:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_description'
      magmad:
        $ref: './orc8r-swagger.yml#/definitions/magmad_gateway_configs'
      tier:
        $ref: './orc8r-swagger.yml#/definitions/tier_id'
      cellular:
        $ref: '#/definitions/gateway_cellular_configs'
      connected_enodeb_serials:
        $ref: '#/definitions/enodeb_serials'
      apn_resources:
        $ref: '#/definitions/apn_resources'
      status:
        $ref: './orc8r-swagger.yml#/definitions/gateway_status'

  mutable_lte_gateway:
    type: object
    description: LTE gateway object with read-only fields omitted
    required:
      - device
      - id
      - name
      - description
      - magmad
      - tier
      - cellular
      - connected_enodeb_serials
    properties:
      device:
        $ref: './orc8r-swagger.yml#/definitions/gateway_device'
      id:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_id'
      name:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_name'
      description:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_description'
      magmad:
        $ref: './orc8r-swagger.yml#/definitions/magmad_gateway_configs'
      tier:
        $ref: './orc8r-swagger.yml#/definitions/tier_id'
      cellular:
        $ref: '#/definitions/gateway_cellular_configs'
      connected_enodeb_serials:
        $ref: '#/definitions/enodeb_serials'
      apn_resources:
        $ref: '#/definitions/apn_resources'

  gateway_cellular_configs:
    type: object
    description: Cellular configuration for LTE gateway
    required:
      - epc
      - ran
    properties:
      epc:
        $ref: '#/definitions/gateway_epc_configs'
      ran:
        $ref: '#/definitions/gateway_ran_configs'
      non_eps_service:
        $ref: '#/definitions/gateway_non_eps_configs'
      dns:
        $ref: '#/definitions/gateway_dns_configs'

  gateway_ran_configs:
    type: object
    description: RAN configuration for LTE gateway
    required:
      - pci
      - transmit_enabled
    properties:
      pci:
        type: integer
        format: uint32
        minimum: 0
        exclusiveMinimum: true
        maximum: 503
        x-nullable: false
        example: 260
      transmit_enabled:
        type: boolean
        example: true

  gateway_epc_configs:
    type: object
    description: EPC configuration for an LTE gateway
    required:
      - ip_block
      - nat_enabled
    properties:
      nat_enabled:
        type: boolean
        example: true
      ip_block:
        type: string
        minLength: 5
        maxLength: 49
        x-nullable: false
        example: '192.168.128.0/24'
      dns_primary:
        type: string
        minLength: 5
        maxLength: 45
        example: '8.8.8.8'
      dns_secondary:
        type: string
        minLength: 5
        maxLength: 45
        example: '8.8.4.4'
      sgi_management_iface_vlan:
        type: string
        description: VLAN ID for management interface traffic on the AGW
        minLength: 1
        maxLength: 4
      sgi_management_iface_static_ip:
        type: string
        format: cidr
        description: IP address for management interface on the AGW, If not specified AGW uses DHCP to configure it.
        minLength: 5
        maxLength: 49
      sgi_management_iface_gw:
        type: string
        format: cidr
        description: IP address of gateway for management interface on the AGW
        minLength: 5
        maxLength: 49


  gateway_non_eps_configs:
    description: Non-EPS service configuration for a gateway
    type: object
    required:
      - non_eps_service_control
    properties:
      csfb_mcc:
        type: string
        pattern: '^(\d{3})$'
        minLength: 1
        example: '001'
      csfb_mnc:
        type: string
        pattern: '^(\d{2,3})$'
        minLength: 1
        example: '01'
      lac:
        type: integer
        format: uint32
        x-nullable: true
        example: 1
      csfb_rat:
        type: integer
        format: uint32
        x-nullable: true
        enum:
          - 0
          - 1
      arfcn_2g:
        type: array
        items:
          type: integer
          format: uint32
      non_eps_service_control:
        type: integer
        format: uint32
        enum:
          - 0
          - 1
          - 2
          - 3 

  gateway_dns_records:
    type: array
    items:
      $ref: '#/definitions/dns_config_record'

  dns_config_record:
    description: Mapping used for DNS resolving from a domain
    type: object
    required:
      - domain
    properties:
      domain:
        type: string
        minLength: 1
        x-nullable: false
        example: example.com
      a_record:
        type: array
        items:
          type: string
          minLength: 1
          format: ipv4
          x-nullable: false
          example: 192.88.99.142
      aaaa_record:
        type: array
        items:
          type: string
          minLength: 1
          format: ipv6
          x-nullable: false
          example: 2001:0db8:85a3:0000:0000:8a2e:0370:7334
      cname_record:
        type: array
        items:
          type: string
          minLength: 1
          x-nullable: false
          example: cname.example.com

  gateway_dns_configs:
    description: DNS configuration for a gateway
    type: object
    required:
      - enable_caching
      - local_ttl
      - dhcp_server_enabled
    properties:
      enable_caching:
        type: boolean
        example: false
      local_ttl:
        type: integer
        format: int32
        example: 0
      dhcp_server_enabled:
        type: boolean
        example: true
      records:
        $ref: '#/definitions/gateway_dns_records'

  enodeb_serials:
    type: array
    items:
      type: string
      minLength: 1
      x-nullable: false
    example:
      - 'SN1234567890'
      - 'SN09876554321'

  enodeb:
    description: Representation of an enodeB
    type: object
    minLength: 1
    required:
      - serial
      - name
      - config
    properties:
      serial:
        type: string
        minLength: 1
        x-nullable: false
        example: 1202000038269KP0037
      name:
        type: string
        minLength: 1
        x-nullable: false
        example: Foobar EnodeB
      description:
        type: string
        example: "Description of this radio"
      config:
        $ref: '#/definitions/enodeb_configuration'
      enodeb_config:
        $ref: '#/definitions/enodeb_config'
      attached_gateway_id:
        type: string
        example: gw1
        readOnly: true

  enodeb_config:
    description: Configuration for managed / unmanaged eNodeb
    type: object
    required:
      - config_type
    properties:
      config_type:
        type: string
        x-nullable: false
        enum:
          - 'MANAGED'
          - 'UNMANAGED'
        example: 'MANAGED'
      managed_config:
        $ref: '#/definitions/enodeb_configuration'
      unmanaged_config:
        $ref: '#/definitions/unmanaged_enodeb_configuration'

  enodeb_configuration:
    description: Configuration for an enodeB. Unfilled fields will be inherited from LTE network and gateway configuration.
    type: object
    minLength: 1
    required:
      - cell_id
      - device_class
      - transmit_enabled
    properties:
      earfcndl:
        type: integer
        format: uint32
        example: 44590
      subframe_assignment:
        type: integer
        format: uint32
        example: 2
        maximum: 6
      special_subframe_pattern:
        type: integer
        format: uint32
        example: 7
        maximum: 9
      pci:
        type: integer
        format: uint32
        minimum: 0
        exclusiveMinimum: true
        maximum: 503
        example: 260
      bandwidth_mhz:
        type: integer
        format: uint32
        example: 20
        enum:
          - 3
          - 5
          - 10
          - 15
          - 20
      tac:
        type: integer
        format: uint32
        minimum: 1
        maximum: 65535
        example: 1
      transmit_enabled:
        type: boolean
        example: true
      cell_id:
        type: integer
        format: uint32
        maximum: 268435455
        example: 138777000
      device_class:
        type: string
        example: 'Baicells ID TDD/FDD'
        enum:
          - 'Baicells Nova-233 G2 OD FDD'
          - 'Baicells Nova-243 OD TDD'
          - 'Baicells Neutrino 224 ID FDD'
          - 'Baicells ID TDD/FDD'
          - 'NuRAN Cavium OC-LTE'
        x-nullable: false

  unmanaged_enodeb_configuration:
    description: Configuration for externally managed eNodeb devices.
    type: object
    minLength: 1
    required:
      - cell_id
      - ip_address
      - tac
    properties:
      cell_id:
        type: integer
        format: uint32
        maximum: 268435455
        example: 138777000
      ip_address:
        type: string
        format: ipv4
        example: '192.168.1.142'
      tac:
        type: integer
        format: uint32
        minimum: 1
        maximum: 65535
        example: 1

  enodeb_state:
    description: Single Enodeb State
    type: object
    required:
      - enodeb_configured
      - gps_longitude
      - gps_latitude
      - enodeb_connected
      - opstate_enabled
      - rf_tx_on
      - rf_tx_desired
      - gps_connected
      - ptp_connected
      - mme_connected
      - fsm_state
    properties:
      time_reported:
        type: integer
        format: uint64
        description: Time at which the state was reported in ms
      reporting_gateway_id:
        type: string
        description: Gateway ID from which the enodeb state was reported
      enodeb_configured:
        type: boolean
      gps_longitude:
        type: string
      gps_latitude:
        type: string
      enodeb_connected:
        type: boolean
      opstate_enabled:
        type: boolean
      rf_tx_on:
        type: boolean
      rf_tx_desired:
        type: boolean
      gps_connected:
        type: boolean
      ptp_connected:
        type: boolean
      mme_connected:
        type: boolean
      fsm_state:
        type: string

  aggregated_maximum_bitrate:
    type: object
    required:
      - max_bandwidth_ul
      - max_bandwidth_dl
    properties:
      max_bandwidth_ul:
        type: integer
        format: uint32
        example: 10000000
      max_bandwidth_dl:
        type: integer
        format: uint32
        example: 20000000

  qos_profile:
    type: object
    properties:
      class_id:
        type: integer
        format: int32
        minimum: 0
        maximum: 255
        example: 9
        default: 9
        x-go-custom-tag: 'magma_alt_name:"QCI"'
      priority_level:
        type: integer
        format: uint32
        minimum: 0
        maximum: 15
        example: 15
        default: 15
      preemption_capability:
        type: boolean
        example: true
        default: true
      preemption_vulnerability:
        type: boolean
        example: false
        default: false

  apn_configuration:
    # APN configuration for the default service
    # that APN provides
    type: object
    required:
      - ambr
      - qos_profile
    properties:
      ambr:
        $ref: '#/definitions/aggregated_maximum_bitrate'
      qos_profile:
        $ref: '#/definitions/qos_profile'

  apn_name:
    type: string
    x-nullable: false
    example: "inet"
    x-go-custom-tag: 'magma_alt_name:"service_selection"'

  apn:
    # A template for configuring APN with string name
    # used as key and rest of the parameters are packed
    # as APN configuration
    type: object
    required:
      - apn_name
      - apn_configuration
    properties:
      apn_name:
        $ref: '#/definitions/apn_name'
      apn_configuration:
        $ref: '#/definitions/apn_configuration'

  apn_resources:
    description: APN resources keyed by APN name
    type: object
    additionalProperties:
      $ref: '#/definitions/apn_resource'

  apn_resource:
    type: object
    required:
      - id
      - apn_name
    properties:
      id:
        description: APN resource ID must be unique across all gateways in a network
        type: string
        minLength: 1
        x-nullable: false
      apn_name:
        $ref: '#/definitions/apn_name'
      vlan_id:
        type: integer
        format: uint32
      gateway_ip:
        type: string
        format: ipv4
      gateway_mac:
        type: string
        format: mac

  qos_class_id:
    type: integer
    format: int32
    example: 9
    default: 9
    # Enum values must align 1-1 with policydb.FlowQos proto's Qci enum
    enum:
      - 0
      - 1
      - 2
      - 3
      - 4
      - 5
      - 6
      - 7
      - 8
      - 9
      - 65
      - 66
      - 67
      - 70
      - 75
      - 79
    x-go-custom-tag: 'magma_alt_name:"QCI"'

  gbr:
    description: Guaranteed bit rate
    type: object
    required:
      - uplink
      - downlink
    properties:
      uplink:
        type: integer
        format: uint32
      downlink:
        type: integer
        format: uint32

  arp:
    description: Allocation and retention priority
    type: object
    properties:
      priority_level:
        type: integer
        format: uint32
        minimum: 0
        maximum: 15
        example: 15
        default: 15
      preemption_capability:
        type: boolean
        example: true
        default: true
      preemption_vulnerability:
        type: boolean
        example: false
        default: false
