---
swagger: '2.0'

magma-gen-meta:
  go-package: magma/lte/cloud/go/services/lte/obsidian/models
  dependencies:
    - 'orc8r/cloud/go/models/swagger-common.yml'
    - 'orc8r/cloud/go/services/orchestrator/obsidian/models/swagger.v1.yml'
    - 'lte/cloud/go/services/policydb/obsidian/models/swagger.v1.yml'
  temp-gen-filename: lte-swagger.yml
  output-dir: lte/cloud/go/services/lte/obsidian
  types:
    - go-struct-name: LteNetwork
      filename: lte_network_swaggergen.go
    - go-struct-name: NetworkCellularConfigs
      filename: network_cellular_configs_swaggergen.go
    - go-struct-name: NetworkRanConfigs
      filename: network_ran_configs_swaggergen.go
    - go-struct-name: NetworkEpcConfigs
      filename: network_epc_configs_swaggergen.go
    - go-struct-name: EnodebSerials
      filename: enodeb_serials_swaggergen.go
    - go-struct-name: GatewayCellularConfigs
      filename: gateway_cellular_configs_swaggergen.go
    - go-struct-name: GatewayEpcConfigs
      filename: gateway_epc_configs_swaggergen.go
    - go-struct-name: GatewayNonEpsConfigs
      filename: gateway_non_eps_configs_swaggergen.go
    - go-struct-name: GatewayDNSConfigs
      filename: gateway_dns_configs_swaggergen.go
    - go-struct-name: GatewayDNSRecords
      filename: gateway_dns_records_swaggergen.go
    - go-struct-name: GatewayHEConfig
      filename: gateway_he_config_swaggergen.go
    - go-struct-name: DNSConfigRecord
      filename: dns_config_record_swaggergen.go
    - go-struct-name: LteGateway
      filename: lte_gateway_swaggergen.go
    - go-struct-name: MutableLteGateway
      filename: mutable_lte_gateway_swaggergen.go
    - go-struct-name: Enodeb
      filename: enodeb_swaggergen.go
    - go-struct-name: EnodebConfig
      filename: enodeb_config_swaggergen.go
    - go-struct-name: EnodebConfiguration
      filename: enodeb_configuration_swaggergen.go
    - go-struct-name: UnmanagedEnodebConfiguration
      filename: unmanaged_enodeb_configuration_swaggergen.go
    - go-struct-name: EnodebState
      filename: enodeb_state_swaggergen.go
    - go-struct-name: AggregatedMaximumBitrate
      filename: aggregated_maximum_bitrate_swaggergen.go
    - go-struct-name: QoSProfile
      filename: qos_profile_swaggergen.go
    - go-struct-name: APNConfiguration
      filename: apn_configuration_swaggergen.go
    - go-struct-name: APNName
      filename: apn_name_swaggergen.go
    - go-struct-name: APN
      filename: apn_swaggergen.go
    - go-struct-name: CellularGatewayPool
      filename: cellular_gateway_pool_swaggergen.go
    - go-struct-name: MutableCellularGatewayPool
      filename: mutable_cellular_gateway_pool_swaggergen.go
    - go-struct-name: CellularGatewayPoolConfigs
      filename: cellular_gateway_pool_configs_swaggergen.go
    - go-struct-name: CellularGatewayPoolRecord
      filename: cellular_gateway_pool_record_swaggergen.go
    - go-struct-name: CellularGatewayPoolRecords
      filename: cellular_gateway_pool_records_swaggergen.go

info:
  title: LTE Network Management
  description: LTE REST APIs
  version: 1.0.0

basePath: /magma/v1

tags:
  - name: APNs
    description: Access point name
  - name: EnodeBs
    description: eNodeB devices attached to the network
  - name: LTE Networks
    description: Endpoints related to LTE networks
  - name: LTE Gateways
    description: Endpoints related to LTE gateway management

paths:
  /lte:
    get:
      summary: List all LTE network IDs
      tags:
        - LTE Networks
      responses:
        '200':
          description: List of LTE network IDs
          schema:
            type: array
            items:
              type: string
            example:
              - lte_network1
              - lte_network2
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Create a new LTE network
      tags:
        - LTE Networks
      parameters:
        - name: lte_network
          in: body
          description: Configuration of the network to create
          required: true
          schema:
            $ref: '#/definitions/lte_network'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}:
    get:
      summary: Describe an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Full description of an LTE network
          schema:
            $ref: '#/definitions/lte_network'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update an entire LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: lte_network
          in: body
          description: Full desired configuration of the network
          required: true
          schema:
            $ref: '#/definitions/lte_network'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Delete an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/name:
    get:
      summary: Get name of an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Name of the network
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/network_name'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the name of an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: name
          in: body
          description: New name for the network
          required: true
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/network_name'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/description:
    get:
      summary: Get description of an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Description of the network
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/network_description'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the description of an LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: description
          in: body
          description: New name for the network
          required: true
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/network_description'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/cellular:
    get:
      summary: Get cellular configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Cellular configuration of the network
          schema:
            $ref: '#/definitions/network_cellular_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update cellular configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New cellular configuration for the network
          required: true
          schema:
            $ref: '#/definitions/network_cellular_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/cellular/epc:
    get:
      summary: Get EPC configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: EPC configuration of the network
          schema:
            $ref: '#/definitions/network_epc_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update EPC configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New EPC configuration for the network
          required: true
          schema:
            $ref: '#/definitions/network_epc_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/cellular/ran:
    get:
      summary: Get RAN configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: RAN configuration of the network
          schema:
            $ref: '#/definitions/network_ran_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update RAN configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New RAN configuration for the network
          required: true
          schema:
            $ref: '#/definitions/network_ran_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/cellular/feg_network_id:
    get:
      summary: Get Federation Gateway network ID for the network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: ID of the Federation Gateway network
          schema:
            type: string
            example: feg_network
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the Federation Gateway network ID
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: feg_network_id
          in: body
          description: Desired federation gateway network ID
          required: true
          schema:
            type: string
            example: feg_network
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateway_pools:
    get:
      summary: List all gateway pools in LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: All gateway pools in LTE network
          schema:
            type: object
            additionalProperties:
              $ref: '#/definitions/cellular_gateway_pool'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Create new gateway pool in LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - in: body
          name: HA Gateway Pool
          description: LTE HA gateway pool
          required: true
          schema:
            $ref: '#/definitions/mutable_cellular_gateway_pool'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateway_pools/{gateway_pool_id}:
    get:
      summary: Retrieve gateway pool from LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/gateway_pool_id'
      responses:
        '200':
          description: HA gateway pool
          schema:
            $ref: '#/definitions/cellular_gateway_pool'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway pool in LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/gateway_pool_id'
        - in: body
          name: HA Gateway Pool
          description: LTE HA gateway pool
          required: true
          schema:
            $ref: '#/definitions/mutable_cellular_gateway_pool'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Delete gateway pool from LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/gateway_pool_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config:
    get:
      summary: Get a network-wide subscriber config
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Subscriber Config
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/network_subscriber_config'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update a network-wide subscriber config
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: record
          in: body
          description: Subscriber Config for the Network
          required: true
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/network_subscriber_config'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config/rule_names:
    get:
      summary: Get network-wide rule names
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Subscriber Config
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/rule_names'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update network-wide rule names
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: record
          in: body
          description: Subscriber Config for the Network
          required: true
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/rule_names'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config/rule_names/{rule_id}:
    post:
      summary: Add a network-wide rule name
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './lte-policydb-swagger.yml#/parameters/rule_id'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Add a network-wide rule name
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './lte-policydb-swagger.yml#/parameters/rule_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config/base_names:
    get:
      summary: Get network-wide base names
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Subscriber Config
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/base_names'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update network-wide base names
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: record
          in: body
          description: Subscriber Config for the Network
          required: true
          schema:
            $ref: './lte-policydb-swagger.yml#/definitions/base_names'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/subscriber_config/base_names/{base_name}:
    post:
      summary: Add a network-wide base name
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './lte-policydb-swagger.yml#/parameters/base_name'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Add a network-wide base name
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './lte-policydb-swagger.yml#/parameters/base_name'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/dns:
    get:
      summary: Get DNS configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: DNS configuration of the network
          schema:
            $ref: './orc8r-swagger.yml#/definitions/network_dns_config'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update DNS configuration of LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New DNS configuration for the network
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/network_dns_config'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/dns/records:
    get:
      summary: Get the DNS config records for the LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Custom DNS records for the network
          schema:
            type: array
            items:
              $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

    put:
      summary: Change all the DNS records for the LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: records
          in: body
          description: Custom DNS records for the network
          required: true
          schema:
            type: array
            items:
              $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/dns/records/{domain}:
    get:
      summary: Get the DNS config record for a specific domain
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger.yml#/parameters/dns_domain'
      responses:
        '200':
          description: DNS config record
          schema:
            $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Create a DNS record for a specific domain
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger.yml#/parameters/dns_domain'
        - name: record
          in: body
          description: Custom DNS record for the domain
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update a DNS record for a specific domain
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger.yml#/parameters/dns_domain'
        - name: record
          in: body
          description: Custom DNS record for the domain
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Delete the DNS record for a specific domain
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger.yml#/parameters/dns_domain'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/features:
    get:
      summary: Get feature flags for LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Feature flags of the network
          schema:
            $ref: './orc8r-swagger.yml#/definitions/network_features'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update feature flags for LTE network
      tags:
        - LTE Networks
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: config
          in: body
          description: New feature flags for the network
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/network_features'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways:
    get:
      summary: List all gateways for an LTE network
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: Map of all LTE gateways inside the network by gatewayID
          schema:
            type: object
            additionalProperties:
              $ref: '#/definitions/lte_gateway'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Register a new LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: gateway
          in: body
          description: Full desired configuration of the gateway
          required: true
          schema:
            $ref: '#/definitions/mutable_lte_gateway'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}:
    get:
      summary: Get a specific LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The requested LTE gateway
          schema:
            $ref: '#/definitions/lte_gateway'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update an entire LTE gateway record
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: gateway
          in: body
          description: Full desired configuration of the gateway
          required: true
          schema:
            $ref: '#/definitions/mutable_lte_gateway'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Delete an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/name:
    get:
      summary: Get the name of an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The name of the gateway
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/gateway_name'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the name of an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: name
          in: body
          required: true
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/gateway_name'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/description:
    get:
      summary: Get the description of an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The description of the gateway
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/gateway_description'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the description of an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: description
          in: body
          required: true
          schema:
            $ref: './orc8r-swagger-common.yml#/definitions/gateway_description'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/device:
    get:
      summary: Get the physical device for an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The physical device for the gateway
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_device'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the physical device for an LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: device
          in: body
          description: New device for the LTE gateway
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_device'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/magmad:
    get:
      summary: Get magmad agent configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: Magmad agent configuration
          schema:
            $ref: './orc8r-swagger.yml#/definitions/magmad_gateway_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Reconfigure magmad agent
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: magmad
          in: body
          description: New magmad configuration
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/magmad_gateway_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular:
    get:
      summary: Get gateway cellular configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: Cellular configuration
          schema:
            $ref: '#/definitions/gateway_cellular_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway cellular configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New cellular configuration
          required: true
          schema:
            $ref: '#/definitions/gateway_cellular_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/ran:
    get:
      summary: Get gateway RAN configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: RAN configuration
          schema:
            $ref: '#/definitions/gateway_ran_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway RAN configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New RAN configuration
          required: true
          schema:
            $ref: '#/definitions/gateway_ran_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/epc:
    get:
      summary: Get gateway EPC configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: EPC configuration
          schema:
            $ref: '#/definitions/gateway_epc_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway EPC configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New EPC configuration
          required: true
          schema:
            $ref: '#/definitions/gateway_epc_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/non_eps:
    get:
      summary: Get gateway Non-EPS configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '204':
          description: Non-EPS configuration
          schema:
            $ref: '#/definitions/gateway_non_eps_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update gateway Non-EPS configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New Non-EPS configuration
          required: true
          schema:
            $ref: '#/definitions/gateway_non_eps_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/dns:
    get:
      summary: Get DNS configuration of LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: DNS configuration of the gateway
          schema:
            $ref: '#/definitions/gateway_dns_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update DNS configuration of LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New DNS configuration for the gateway
          required: true
          schema:
            $ref: '#/definitions/gateway_dns_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/dns/records:
    get:
      summary: Get the DNS config records for LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: Custom DNS records for the gateway
          schema:
            type: array
            items:
              $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Change all the DNS records for LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: records
          in: body
          description: Custom DNS records for the gateway
          required: true
          schema:
            type: array
            items:
              $ref: './orc8r-swagger.yml#/definitions/dns_config_record'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/cellular/pooling:
    get:
      summary: Get the gateway pool records for LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: Gateway pool records
          schema:
            type: array
            items:
              $ref: '#/definitions/cellular_gateway_pool_record'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Change all the gateway pool records for LTE gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - in: body
          name: resource
          description: Gateway pool records for gateway
          required: true
          schema:
            type: array
            items:
              $ref: '#/definitions/cellular_gateway_pool_record'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/connected_enodeb_serials:
    get:
      summary: Get the SNs of all enodeBs connected to a gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The SNs of all enodeBs
          schema:
            $ref: '#/definitions/enodeb_serials'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Add a new connected enodeB to a gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: serial
          in: body
          required: true
          schema:
            type: string
            minLength: 1
            example: 'SN1234567890'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the set of connected enodeBs
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: serials
          in: body
          required: true
          schema:
            $ref: '#/definitions/enodeb_serials'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Remove an enodeB from the connected devices list
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: serial
          in: body
          required: true
          schema:
            type: string
            minLength: 1
            example: 'SN1234567890'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/tier:
    get:
      summary: Get the ID of the upgrade tier a gateway belongs to
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The ID of the upgrade tier
          schema:
            $ref: './orc8r-swagger.yml#/definitions/tier_id'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the ID of the upgrade tier a gateway belongs to
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: tier_id
          in: body
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/tier_id'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/status:
    get:
      summary: Get the status of a gateway
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The status of the gateway
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_status'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/gateways/{gateway_id}/vpn:
    get:
      summary: Get the gateway VPN configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
      responses:
        '200':
          description: The current VPN gateway config
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_vpn_configs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update the gateway VPN configuration
      tags:
        - LTE Gateways
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/gateway_id'
        - name: config
          in: body
          description: New VPN configuration
          required: true
          schema:
            $ref: './orc8r-swagger.yml#/definitions/gateway_vpn_configs'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/enodebs:
    get:
      summary: List all enodeBs in the network
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: './orc8r-swagger-common.yml#/parameters/page_size'
        - $ref: './orc8r-swagger-common.yml#/parameters/page_token'
      responses:
        '200':
          description: All enodeBs registered in the network with pagination support
          schema:
            type: object
            additionalProperties:
              $ref: '#/definitions/paginated_enodebs'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Register a new enodeB
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - name: enodeb
          in: body
          description: Configuration of the enodeB
          required: true
          schema:
            $ref: '#/definitions/enodeb'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/enodebs/{enodeb_serial}:
    get:
      summary: Retrieve a specific enodeB configuration
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/enodeb_serial'
      responses:
        '200':
          description: The requested enodeB's configuration
          schema:
            $ref: '#/definitions/enodeb'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update an enodeB's configuration
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/enodeb_serial'
        - name: enodeb
          in: body
          description: Desired configuration of the enodeB
          required: true
          schema:
            $ref: '#/definitions/enodeb'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Unregister an enodeB
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/enodeb_serial'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/enodebs/{enodeb_serial}/state:
    get:
      summary: Retrieve reported state from enodeb device
      tags:
        - EnodeBs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/enodeb_serial'
      responses:
        '200':
          description: The requested enodeB's configuration
          schema:
            $ref: '#/definitions/enodeb_state'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/apns:
    get:
      summary: List APNs in the network
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
      responses:
        '200':
          description: List of all the APNs in the network
          schema:
            type: object
            additionalProperties:
              $ref: '#/definitions/apn'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    post:
      summary: Add a new APN to the network
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - in: body
          name: apn
          description: New APN configuration
          required: true
          schema:
            $ref: '#/definitions/apn'
      responses:
        '201':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

  /lte/{network_id}/apns/{apn_name}:
    get:
      summary: Retrieve the APN info
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/apn_name'
      responses:
        '200':
          description: APN Info
          schema:
            $ref: '#/definitions/apn'
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    put:
      summary: Update an existing APN in the network
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/apn_name'
        - in: body
          name: apn
          description: New APN configuration
          required: true
          schema:
            $ref: '#/definitions/apn'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'
    delete:
      summary: Remove an APN from the network
      tags:
        - APNs
      parameters:
        - $ref: './orc8r-swagger-common.yml#/parameters/network_id'
        - $ref: '#/parameters/apn_name'
      responses:
        '204':
          description: Success
        default:
          $ref: './orc8r-swagger-common.yml#/responses/UnexpectedError'

parameters:
  enodeb_serial:
    in: path
    name: enodeb_serial
    description: EnodeB serial number
    required: true
    type: string

  apn_name:
    in: path
    name: apn_name
    description: Access Point Name
    required: true
    type: string

  gateway_pool_id:
    description: Gateway Pool ID
    in: path
    name: gateway_pool_id
    required: true
    type: string

definitions:
  lte_network:
    type: object
    description: LTE Network spec
    required:
      - id
      - name
      - description
      - cellular
      - dns
    properties:
      id:
        $ref: './orc8r-swagger-common.yml#/definitions/network_id'
      name:
        $ref: './orc8r-swagger-common.yml#/definitions/network_name'
      description:
        $ref: './orc8r-swagger-common.yml#/definitions/network_description'
      cellular:
        $ref: '#/definitions/network_cellular_configs'
      dns:
        $ref: './orc8r-swagger.yml#/definitions/network_dns_config'
      features:
        $ref: './orc8r-swagger.yml#/definitions/network_features'
      subscriber_config:
        $ref: './lte-policydb-swagger.yml#/definitions/network_subscriber_config'

  network_cellular_configs:
    description: Cellular configuration for a network
    type: object
    required:
      - ran
      - epc
    minLength: 1
    properties:
      ran:
        $ref: '#/definitions/network_ran_configs'
      epc:
        $ref: '#/definitions/network_epc_configs'
      feg_network_id:
       $ref: '#/definitions/feg_network_id'

  feg_network_id:
    description: Name of the federated network serving this LTE network. Blank for non federated
    type: string
    example: 'feg_id_only_for_federated_network'

  network_ran_configs:
    description: RAN (radio access network) cellular configuration for a network
    type: object
    minLength: 1
    required:
      # fdd/tdd config is a one-of, not supported by swagger spec so leaving
      # out of required fields
      # Technically fdd/tdd operation is determined by earfcndl value
      # See lte_bands.go for an incomplete mapping
      - bandwidth_mhz
    properties:
      bandwidth_mhz:
        type: integer
        format: uint32
        example: 20
        enum:
          - 3
          - 5
          - 10
          - 15
          - 20
        x-nullable: false
      fdd_config:
        type: object
        x-go-custom-tag: 'magma_alt_name:"NetworkRANConfigFDDConfig"'
        required:
          - earfcndl
          - earfcnul
        properties:
          earfcndl:
            type: integer
            format: uint32
            example: 0
            x-nullable: false
          earfcnul:
            type: integer
            format: uint32
            minimum: 0
            exclusiveMinimum: true
            example: 18000
            x-nullable: false
      tdd_config:
        type: object
        x-go-custom-tag: 'magma_alt_name:"NetworkRANConfigTDDConfig"'
        required:
          - earfcndl
          - subframe_assignment
          - special_subframe_pattern
        properties:
          earfcndl:
            type: integer
            format: uint32
            example: 44590
            x-nullable: false
          subframe_assignment:
            type: integer
            format: uint32
            example: 2
            maximum: 6
            x-nullable: false
          special_subframe_pattern:
            type: integer
            format: uint32
            example: 7
            maximum: 9
            x-nullable: false

  network_epc_configs:
    description: EPC (evolved packet core) cellular configuration for a network
    type: object
    minLength: 1
    required:
      - lte_auth_amf
      - lte_auth_op
      - mcc
      - mnc
      - hss_relay_enabled
      - gx_gy_relay_enabled
      - tac
    properties:
      mcc:
        type: string
        pattern: '^(\d{3})$'
        example: '001'
        x-nullable: false
      mnc:
        type: string
        pattern: '^(\d{2,3})$'
        example: '01'
        x-nullable: false
      tac:
        type: integer
        format: uint32
        minimum: 1
        maximum: 65535
        example: 1
        x-nullable: false
      lte_auth_op:
        type: string
        format: byte
        example: EREREREREREREREREREREQ==
        minLength: 15
        maxLength: 16
        x-nullable: false
      lte_auth_amf:
        type: string
        format: byte
        x-nullable: false
        example: gAA=
      sub_profiles:
        type: object
        additionalProperties:
          type: object
          required:
            - max_ul_bit_rate
            - max_dl_bit_rate
          properties:
            max_ul_bit_rate:
              type: integer
              format: uint64
              minimum: 0
              exclusiveMinimum: true
              x-nullable: false
              example: 100000000
            max_dl_bit_rate:
              type: integer
              format: uint64
              minimum: 0
              exclusiveMinimum: true
              x-nullable: false
              example: 20000000
      default_rule_id:
        type: string
        example: 'default_rule_1'
      hss_relay_enabled:
        type: boolean
        example: false
      gx_gy_relay_enabled:
        type: boolean
        example: false
      subscriberdb_sync_interval:
        $ref: '#/definitions/subscriberdb_sync_interval'
      cloud_subscriberdb_enabled:
        type: boolean
        example: false
      enable_converged_core:
        description: Enables 5G Standalone (SA) at a network level
        type: boolean
        example: true
        default: false
      congestion_control_enabled:
        description: Network configuration flag for congestion control on EPC
        type: boolean
        example: true
        default: true
      network_services:
        description: Configuration for network services. Services will be instantiated in the listed order.
        type: array
        x-omitempty: true
        items:
          type: string
          enum:
            - 'dpi'
            - 'policy_enforcement'
        example:
          - 'policy_enforcement'
      mobility:
        type: object
        description: Configuration for IP Allocation (Mobility).
        required:
          - ip_allocation_mode
        properties:
          ip_allocation_mode:
            type: string
            x-nullable: false
            enum:
              - 'NAT'
              - 'STATIC'
              - 'DHCP_PASSTHROUGH'
              - 'DHCP_BROADCAST'
            example: 'NAT'
          enable_static_ip_assignments:
            type: boolean
            example: true
          enable_multi_apn_ip_allocation:
            type: boolean
            example: true
          reserved_addresses:
            type: array
            items:
              type: string
              format: ipv4
              example: 192.168.0.1
          nat:
            type: object
            properties:
              ip_blocks:
                type: array
                items:
                  type: string
                  minLength: 5
                  maxLength: 49
                  example: '192.168.0.0/16'
          static:
            type: object
            properties:
              ip_blocks_by_tac:
                type: object
                additionalProperties:
                  type: array
                  items:
                    type: string
                    minLength: 5
                    maxLength: 49
                example:
                  1: ['192.168.0.0/16']
                  2: ['172.10.0.0/16', '172.20.0.0/16']
      restricted_plmns:
        type: array
        description: 'List of PLMN IDs restricted in the network'
        items:
          $ref: '#/definitions/plmn_config'
        x-omitempty: true

      service_area_maps:
        type: object
        description: 'Mapping service areas to tacs in the network'
        additionalProperties:
          $ref: '#/definitions/tac_list'

      restricted_imeis:
        type: array
        description: 'List of IMEIs restricted in the network'
        items:
          $ref: '#/definitions/imei'
        x-omitempty: true

  lte_gateway:
    type: object
    description: Full description of an LTE gateway
    required:
      - device
      - id
      - name
      - description
      - magmad
      - tier
      - cellular
      - connected_enodeb_serials
    properties:
      device:
        $ref: './orc8r-swagger.yml#/definitions/gateway_device'
      id:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_id'
      name:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_name'
      description:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_description'
      magmad:
        $ref: './orc8r-swagger.yml#/definitions/magmad_gateway_configs'
      tier:
        $ref: './orc8r-swagger.yml#/definitions/tier_id'
      cellular:
        $ref: '#/definitions/gateway_cellular_configs'
      connected_enodeb_serials:
        $ref: '#/definitions/enodeb_serials'
      apn_resources:
        $ref: '#/definitions/apn_resources'
      status:
        $ref: './orc8r-swagger.yml#/definitions/gateway_status'

  mutable_lte_gateway:
    type: object
    description: LTE gateway object with read-only fields omitted
    required:
      - device
      - id
      - name
      - description
      - magmad
      - tier
      - cellular
      - connected_enodeb_serials
    properties:
      device:
        $ref: './orc8r-swagger.yml#/definitions/gateway_device'
      id:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_id'
      name:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_name'
      description:
        $ref: './orc8r-swagger-common.yml#/definitions/gateway_description'
      magmad:
        $ref: './orc8r-swagger.yml#/definitions/magmad_gateway_configs'
      tier:
        $ref: './orc8r-swagger.yml#/definitions/tier_id'
      cellular:
        $ref: '#/definitions/gateway_cellular_configs'
      connected_enodeb_serials:
        $ref: '#/definitions/enodeb_serials'
      apn_resources:
        $ref: '#/definitions/apn_resources'

  gateway_cellular_configs:
    type: object
    description: Cellular configuration for LTE gateway
    required:
      - epc
      - ran
    properties:
      epc:
        $ref: '#/definitions/gateway_epc_configs'
      ran:
        $ref: '#/definitions/gateway_ran_configs'
      non_eps_service:
        $ref: '#/definitions/gateway_non_eps_configs'
      dns:
        $ref: '#/definitions/gateway_dns_configs'
      he_config:
        $ref: '#/definitions/gateway_he_config'
      pooling:
        $ref: '#/definitions/cellular_gateway_pool_records'

  gateway_ran_configs:
    type: object
    description: RAN configuration for LTE gateway
    required:
      - pci
      - transmit_enabled
    properties:
      pci:
        type: integer
        format: uint32
        minimum: 0
        exclusiveMinimum: true
        maximum: 503
        x-nullable: false
        example: 260
      transmit_enabled:
        type: boolean
        example: true

  gateway_epc_configs:
    type: object
    description: EPC configuration for an LTE gateway
    required:
      - ip_block
      - nat_enabled
    properties:
      nat_enabled:
        type: boolean
        example: true
      ip_block:
        type: string
        minLength: 5
        maxLength: 49
        x-nullable: false
        example: '192.168.128.0/24'
      ipv6_block:
        type: string
        x-nullable: false
        example: 'fdee:5:6c::/48'
      ipv6_prefix_allocation_mode:
        type: string
        x-nullable: false
        enum:
          - 'RANDOM'
          - 'HASH'
        example: 'RANDOM'
      dns_primary:
        type: string
        minLength: 5
        maxLength: 45
        example: '8.8.8.8'
      dns_secondary:
        type: string
        minLength: 5
        maxLength: 45
        example: '8.8.4.4'
      ipv4_p_cscf_addr:
        type: string
        description: IP address for IPv4 P-CSCF on the AGW
        format: ipv4
        example: '172.27.23.150'
      ipv6_dns_addr:
        description: IPv6 DNS Server address on the AGW
        type: string
        format: ipv6
        example: '2001:4860:4860:0:0:0:0:8888'
      ipv6_p_cscf_addr:
        description: IP address for IPv6 P-CSCF on the AGW
        type: string
        format: ipv6
        example: '2a12:577:9941:f99c:0002:0001:c731:f114'
      ipv4_sgw_s1u_addr:
        description: IP address for IPv4 S1U endpoint on the AGW
        type: string
        minLength: 5
        maxLength: 49
      sgi_management_iface_vlan:
        type: string
        description: VLAN ID for management interface traffic on the AGW
        minLength: 1
        maxLength: 4
      sgi_management_iface_static_ip:
        type: string
        format: cidr
        description: IP address for management interface on the AGW, If not specified AGW uses DHCP to configure it.
        minLength: 5
        maxLength: 49
      sgi_management_iface_gw:
        type: string
        format: cidr
        description: IP address of gateway for management interface on the AGW
        minLength: 5
        maxLength: 49
      congestion_control_enabled:
        description: Flag to enable or disable congestion control on MME
        type: boolean
        example: true
        default: true
      subscriberdb_sync_interval:
        $ref: '#/definitions/subscriberdb_sync_interval'


  gateway_non_eps_configs:
    description: Non-EPS service configuration for a gateway
    type: object
    required:
      - non_eps_service_control
    properties:
      csfb_mcc:
        type: string
        pattern: '^(\d{3})$'
        minLength: 1
        example: '001'
      csfb_mnc:
        type: string
        pattern: '^(\d{2,3})$'
        minLength: 1
        example: '01'
      lac:
        type: integer
        format: uint32
        x-nullable: true
        example: 1
      csfb_rat:
        type: integer
        format: uint32
        x-nullable: true
        enum:
          - 0
          - 1
      arfcn_2g:
        type: array
        items:
          type: integer
          format: uint32
      non_eps_service_control:
        type: integer
        format: uint32
        enum:
          - 0
          - 1
          - 2
          - 3

  gateway_dns_records:
    type: array
    items:
      $ref: './orc8r-swagger.yml#/definitions/dns_config_record'

  cellular_gateway_pool_records:
    type: array
    items:
      x-nullable: falsee
      $ref: '#/definitions/cellular_gateway_pool_record'

  gateway_dns_configs:
    description: DNS configuration for a gateway
    type: object
    required:
      - enable_caching
      - local_ttl
      - dhcp_server_enabled
    properties:
      enable_caching:
        type: boolean
        example: false
      local_ttl:
        type: integer
        format: int32
        example: 0
      dhcp_server_enabled:
        type: boolean
        example: true
      records:
        $ref: '#/definitions/gateway_dns_records'

  gateway_he_config:
    description: Header Enrichment configuration
    type: object
    required:
      - enable_header_enrichment
      - enable_encryption
      - he_encryption_algorithm
      - he_hash_function
      - he_encoding_type
    properties:
      enable_header_enrichment:
        description: True if header enrichment feature should be disabled for gateway
        type: boolean
        example: true
      enable_encryption:
        description: True if headers should be encrypted
        type: boolean
        example: true
      encryption_key:
        description: Key to be used in header encryption
        type: string
        x-nullable: false
        example: 'C14r0315v0x'
      hmac_key:
        description: Hmac key to be used in header encryption
        type: string
        x-nullable: false
        example: 'Xs21Ncas87'
      he_encryption_algorithm:
        type: string
        x-nullable: false
        enum:
          - 'RC4'
          - 'AES256_CBC_HMAC_MD5'
          - 'AES256_ECB_HMAC_MD5'
          - 'GZIPPED_AES256_ECB_SHA1'
        example: 'RC4'
      he_hash_function:
        type: string
        x-nullable: false
        enum:
          - 'MD5'
          - 'HEX'
          - 'SHA256'
        example: 'MD5'
      he_encoding_type:
        type: string
        x-nullable: false
        enum:
          - 'BASE64'
          - 'HEX2BIN'
        example: 'BASE64'

  subscriberdb_sync_interval:
    description: Interval in seconds between gateway requests to sync its subscriberdb with the cloud.
    type: integer
    format: uint32
    minimum: 60
    example: 300

  enodeb_serials:
    type: array
    items:
      type: string
      minLength: 1
      x-nullable: false
    example:
      - 'SN1234567890'
      - 'SN09876554321'

  enodeb:
    description: Representation of an enodeB
    type: object
    minLength: 1
    required:
      - serial
      - name
      - config
    properties:
      serial:
        type: string
        minLength: 1
        x-nullable: false
        example: 1202000038269KP0037
      name:
        type: string
        minLength: 1
        x-nullable: false
        example: Foobar EnodeB
      description:
        type: string
        example: "Description of this radio"
      config:
        $ref: '#/definitions/enodeb_configuration'
      enodeb_config:
        $ref: '#/definitions/enodeb_config'
      attached_gateway_id:
        type: string
        example: gw1
        readOnly: true

  enodeb_config:
    description: Configuration for managed / unmanaged eNodeb
    type: object
    required:
      - config_type
    properties:
      config_type:
        type: string
        x-nullable: false
        enum:
          - 'MANAGED'
          - 'UNMANAGED'
        example: 'MANAGED'
      managed_config:
        $ref: '#/definitions/enodeb_configuration'
      unmanaged_config:
        $ref: '#/definitions/unmanaged_enodeb_configuration'

  enodeb_configuration:
    description: Configuration for an enodeB. Unfilled fields will be inherited from LTE network and gateway configuration.
    type: object
    minLength: 1
    required:
      - cell_id
      - device_class
      - transmit_enabled
    properties:
      earfcndl:
        type: integer
        format: uint32
        example: 44590
      subframe_assignment:
        type: integer
        format: uint32
        example: 2
        maximum: 6
      special_subframe_pattern:
        type: integer
        format: uint32
        example: 7
        maximum: 9
      pci:
        type: integer
        format: uint32
        minimum: 0
        exclusiveMinimum: true
        maximum: 503
        example: 260
      bandwidth_mhz:
        type: integer
        format: uint32
        example: 20
        enum:
          - 3
          - 5
          - 10
          - 15
          - 20
      tac:
        type: integer
        format: uint32
        minimum: 1
        maximum: 65535
        example: 1
      transmit_enabled:
        type: boolean
        example: true
      cell_id:
        type: integer
        format: uint32
        maximum: 268435455
        example: 138777000
      device_class:
        type: string
        example: 'Baicells ID TDD/FDD'
        enum:
          - 'Baicells Nova-233 G2 OD FDD'
          - 'Baicells Nova-243 OD TDD'
          - 'Baicells Neutrino 224 ID FDD'
          - 'Baicells ID TDD/FDD'
          - 'NuRAN Cavium OC-LTE'
        x-nullable: false

  unmanaged_enodeb_configuration:
    description: Configuration for externally managed eNodeb devices.
    type: object
    minLength: 1
    required:
      - cell_id
      - ip_address
      - tac
    properties:
      cell_id:
        type: integer
        format: uint32
        maximum: 268435455
        example: 138777000
      ip_address:
        type: string
        format: ipv4
        example: '192.168.1.142'
      tac:
        type: integer
        format: uint32
        minimum: 1
        maximum: 65535
        example: 1

  enodeb_state:
    description: Single Enodeb State
    type: object
    required:
      - enodeb_configured
      - gps_longitude
      - gps_latitude
      - enodeb_connected
      - opstate_enabled
      - rf_tx_on
      - rf_tx_desired
      - gps_connected
      - ptp_connected
      - mme_connected
      - fsm_state
    properties:
      time_reported:
        type: integer
        format: uint64
        description: Time at which the state was reported in ms
      reporting_gateway_id:
        type: string
        description: Gateway ID from which the enodeb state was reported
      enodeb_configured:
        type: boolean
      gps_longitude:
        type: string
      gps_latitude:
        type: string
      enodeb_connected:
        type: boolean
      opstate_enabled:
        type: boolean
      rf_tx_on:
        type: boolean
      rf_tx_desired:
        type: boolean
      gps_connected:
        type: boolean
      ptp_connected:
        type: boolean
      mme_connected:
        type: boolean
      fsm_state:
        type: string
      ip_address:
        type: string
        format: ipv4
      ues_connected:
        type: integer
        format: int32

  aggregated_maximum_bitrate:
    type: object
    required:
      - max_bandwidth_ul
      - max_bandwidth_dl
    properties:
      max_bandwidth_ul:
        type: integer
        format: uint32
        example: 10000000
      max_bandwidth_dl:
        type: integer
        format: uint32
        example: 20000000

  qos_profile:
    type: object
    properties:
      class_id:
        type: integer
        format: int32
        minimum: 0
        maximum: 255
        example: 9
        default: 9
        x-go-custom-tag: 'magma_alt_name:"QCI"'
      priority_level:
        type: integer
        format: uint32
        minimum: 0
        maximum: 15
        example: 15
        default: 15
      preemption_capability:
        type: boolean
        example: true
        default: true
      preemption_vulnerability:
        type: boolean
        example: false
        default: false

  apn_configuration:
    # APN configuration for the default service
    # that APN provides
    type: object
    required:
      - ambr
      - qos_profile
    properties:
      ambr:
        $ref: '#/definitions/aggregated_maximum_bitrate'
      qos_profile:
        $ref: '#/definitions/qos_profile'

  apn_name:
    type: string
    x-nullable: false
    example: "inet"
    x-go-custom-tag: 'magma_alt_name:"service_selection"'

  apn:
    # A template for configuring APN with string name
    # used as key and rest of the parameters are packed
    # as APN configuration
    type: object
    required:
      - apn_name
      - apn_configuration
    properties:
      apn_name:
        $ref: '#/definitions/apn_name'
      apn_configuration:
        $ref: '#/definitions/apn_configuration'

  apn_resources:
    description: APN resources keyed by APN name
    type: object
    additionalProperties:
      $ref: '#/definitions/apn_resource'

  apn_resource:
    type: object
    required:
      - id
      - apn_name
    properties:
      id:
        description: APN resource ID must be unique across all gateways in a network
        type: string
        minLength: 1
        x-nullable: false
      apn_name:
        $ref: '#/definitions/apn_name'
      vlan_id:
        type: integer
        format: uint32
      gateway_ip:
        type: string
        format: ipv4
      gateway_mac:
        type: string
        format: mac

  cellular_gateway_pool:
    description: Highly available gateway pool in an LTE network
    type: object
    required:
      - gateway_pool_id
      - gateway_ids
      - config
    properties:
      gateway_pool_id:
         $ref: '#/definitions/gateway_pool_id'
      gateway_pool_name:
        type: string
        example: "Pool 1"
      config:
        $ref: '#/definitions/cellular_gateway_pool_configs'
      gateway_ids:
        x-nullable: false
        type: array
        uniqueItems: true
        items:
          $ref: './orc8r-swagger-common.yml#/definitions/gateway_id'

  mutable_cellular_gateway_pool:
    description: Mutable version of the cellular gateway pool
    type: object
    required:
      - gateway_pool_id
      - config
    properties:
      gateway_pool_id:
        $ref: '#/definitions/gateway_pool_id'
      gateway_pool_name:
        type: string
        example: "Pool 1"
      config:
        $ref: '#/definitions/cellular_gateway_pool_configs'

  gateway_pool_id:
    type: string
    minLength: 1
    x-nullable: false
    pattern: '^[a-z][\da-z_-]+$'
    example: pool1

  cellular_gateway_pool_configs:
    description: Configuration for gateway pool
    type: object
    required:
      - mme_group_id
    properties:
      mme_group_id:
        x-nullable: false
        type: integer
        format: uint32
        minimum: 0
        maximum: 65535
        example: 1
        default: 1

  cellular_gateway_pool_record:
    description: Record in a gateway pool
    type: object
    required:
      - gateway_pool_id
      - mme_code
      - mme_relative_capacity
    properties:
      gateway_pool_id:
         $ref: '#/definitions/gateway_pool_id'
      mme_code:
        x-nullable: false
        type: integer
        format: uint32
        minimum: 0
        maximum: 65535
        example: 1
        default: 1
      mme_relative_capacity:
        x-nullable: false
        type: integer
        format: uint32
        minimum: 0
        maximum: 255
        example: 10
        default: 10


  tac_list:
    type: array
    items:
      $ref: '#/definitions/tac'
    x-omitempty: true
    description: 'List of tac ids'
    example:
      - 1

  tac:
    type: integer
    format: uint32
    minimum: 1
    maximum: 65535
    example: 1
    x-nullable: false

  plmn_config:
    description: PLMN Configuration
    type: object
    required:
      - mcc
      - mnc
    properties:
      mcc:
        type: string
        pattern: '^(\d{3})$'
        example: '001'
        x-nullable: false
      mnc:
        type: string
        pattern: '^(\d{2,3})$'
        example: '01'
        x-nullable: false

  imei:
    description: IMEI (type allocation code and serial number)
    type: object
    required:
      - tac
    properties:
      tac:
        type: string
        pattern: '^(\d{8})$'
        example: '01300600'
        x-nullable: false
      snr:
        type: string
        pattern: '^(\d{6})$'
        example: '176148'
        x-nullable: false

  paginated_enodebs:
    description: Page of enodebs
    properties:
      next_page_token:
        $ref: '#/definitions/next_page_token'
      enodebs:
        additionalProperties:
          $ref: '#/definitions/enodeb'
          x-nullable: true
        type: object
      total_count:
        description: estimated total number of enodebs
        example: 10
        format: int64
        type: integer
        x-nullable: false
    required:
      - next_page_token
      - enodebs
      - total_count
    type: object
