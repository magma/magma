{{/*
# Copyright 2020 The Magma Authors.

# This source code is licensed under the BSD-style license found in the
# LICENSE file in the root directory of this source tree.

# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
*/}}
---
apiVersion: v1
kind: Pod
metadata:
  labels:
    app.kubernetes.io/component: oai-config
  name: oai-config
spec:
  containers:
    - args:
        - /usr/bin/env
        - python3
        - /usr/local/bin/generate_oai_config.py
      image: "{{ .Values.image.repository }}/agw_gateway_python:{{ .Values.image.tag | default .Chart.AppVersion }}"
      name: oai-config
      resources: {}
      volumeMounts:
        - mountPath: /etc/magma
          name: magma-config
        - mountPath: /var/opt/magma
          name: agwc-claim
  restartPolicy: Never
  hostNetwork: true
  volumes:
    - name: magma-config
      hostPath:
        path: /etc/magma
        type: Directory
    - name: agwc-claim
      persistentVolumeClaim:
        claimName: agwc-claim
