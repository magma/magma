swagger: "2.0"
info:
  title: Orchestrator Network Management
  description: Orchestrator REST APIs
  version: 1.0.0
basePath: /magma/v1
consumes: []
produces: []
schemes: []
tags:
- description: Everything about networks
  name: Networks
- description: Provision and manage gateways
  name: Gateways
- description: Configuration to manage upgrades
  name: Upgrades
- description: Version info
  name: About
paths:
  /about/version:
    get:
      responses:
        "200":
          description: Version
          schema:
            $ref: '#/definitions/version_info'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get version
      tags:
      - About
  /channels:
    get:
      responses:
        "200":
          description: List of release channel IDs
          schema:
            items:
              $ref: '#/definitions/channel_id'
            type: array
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: List all release channels
      tags:
      - Upgrades
    post:
      parameters:
      - description: The release channel to create
        in: body
        name: channel
        required: true
        schema:
          $ref: '#/definitions/release_channel'
      responses:
        "201":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Create a new release channel
      tags:
      - Upgrades
  /channels/{channel_id}:
    delete:
      parameters:
      - $ref: '#/parameters/channel_id'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Delete a release channel
      tags:
      - Upgrades
    get:
      parameters:
      - $ref: '#/parameters/channel_id'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/release_channel'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get release channel by id
      tags:
      - Upgrades
    put:
      parameters:
      - $ref: '#/parameters/channel_id'
      - description: New channel configuration
        in: body
        name: release channel
        required: true
        schema:
          $ref: '#/definitions/release_channel'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update a release channel
      tags:
      - Upgrades
  /networks:
    get:
      responses:
        "200":
          description: List of network IDs
          schema:
            example:
            - network1
            - network2
            items:
              type: string
            type: array
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: List all network IDs
      tags:
      - Networks
    post:
      parameters:
      - description: Configuration of the network to create
        in: body
        name: network
        required: true
        schema:
          $ref: '#/definitions/network'
      responses:
        "201":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Register a network
      tags:
      - Networks
  /networks/{network_id}:
    delete:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Delete a network
      tags:
      - Networks
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: Network description
          schema:
            $ref: '#/definitions/network'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get a generic network description
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: Full desired configuration of the network
        in: body
        name: network
        required: true
        schema:
          $ref: '#/definitions/network'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update an entire network
      tags:
      - Networks
  /networks/{network_id}/description:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: The description of the network
          schema:
            $ref: ./orc8r-swagger-common.yml#/definitions/network_description
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the description of a network
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: New name for the network
        in: body
        name: description
        required: true
        schema:
          $ref: ./orc8r-swagger-common.yml#/definitions/network_description
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the description of a network
      tags:
      - Networks
  /networks/{network_id}/dns:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: DNS configuration of the network
          schema:
            $ref: '#/definitions/network_dns_config'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get DNS of network
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: New DNS configuration for the network
        in: body
        name: Network DNS
        required: true
        schema:
          $ref: '#/definitions/network_dns_config'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update DNS of network
      tags:
      - Networks
  /networks/{network_id}/dns/records:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: Custom DNS records for the network
          schema:
            $ref: '#/definitions/network_dns_records'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the DNS config records for the network
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: Custom DNS records for the network
        in: body
        name: records
        required: true
        schema:
          $ref: '#/definitions/network_dns_records'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Change all the DNS records for the network
      tags:
      - Networks
  /networks/{network_id}/dns/records/{domain}:
    delete:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/dns_domain'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Delete the DNS record for a specific domain
      tags:
      - Networks
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/dns_domain'
      responses:
        "200":
          description: DNS config record
          schema:
            $ref: '#/definitions/dns_config_record'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the DNS config record for a specific domain
      tags:
      - Networks
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/dns_domain'
      - description: Custom DNS record for the domain
        in: body
        name: record
        required: true
        schema:
          $ref: '#/definitions/dns_config_record'
      responses:
        "201":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Create a DNS record for a specific domain
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/dns_domain'
      - description: Custom DNS record for the domain
        in: body
        name: record
        required: true
        schema:
          $ref: '#/definitions/dns_config_record'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update a DNS record for a specific domain
      tags:
      - Networks
  /networks/{network_id}/features:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: Feature flags of the network
          schema:
            $ref: '#/definitions/network_features'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get feature flags for network
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: New network features for the network
        in: body
        name: network features
        required: true
        schema:
          $ref: '#/definitions/network_features'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update feature flags for network
      tags:
      - Networks
  /networks/{network_id}/gateways:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/page_size
      - $ref: ./orc8r-swagger-common.yml#/parameters/page_token
      responses:
        "200":
          description: Map of all gateways inside the network by gatewayID with pagination
            support
          schema:
            $ref: '#/definitions/paginated_gateways'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: List all gateways for a network
      tags:
      - Gateways
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: Full desired configuration of the gateway
        in: body
        name: gateway
        required: true
        schema:
          $ref: '#/definitions/magmad_gateway'
      responses:
        "201":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Register a new gateway
      tags:
      - Gateways
  /networks/{network_id}/gateways/{gateway_id}:
    delete:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Delete a gateway
      tags:
      - Gateways
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "200":
          description: The requested gateway
          schema:
            $ref: '#/definitions/magmad_gateway'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get a specific gateway
      tags:
      - Gateways
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - description: Full desired configuration of the gateway
        in: body
        name: gateway
        required: true
        schema:
          $ref: '#/definitions/magmad_gateway'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update an entire gateway record
      tags:
      - Gateways
  /networks/{network_id}/gateways/{gateway_id}/command/generic:
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - description: Parameters
        in: body
        name: Parameters
        required: true
        schema:
          $ref: '#/definitions/generic_command_params'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/generic_command_response'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Execute generic command on gateway
      tags:
      - Commands
  /networks/{network_id}/gateways/{gateway_id}/command/ping:
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - description: Ping request
        in: body
        name: Ping request
        required: true
        schema:
          $ref: '#/definitions/ping_request'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/ping_response'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Ping host(s) from gateway
      tags:
      - Commands
  /networks/{network_id}/gateways/{gateway_id}/command/reboot:
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "200":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Reboot gateway device
      tags:
      - Commands
  /networks/{network_id}/gateways/{gateway_id}/command/restart_services:
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - description: Services
        in: body
        name: Services
        required: true
        schema:
          example: []
          items:
            type: string
          type: array
      responses:
        "200":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Restart gateway services
      tags:
      - Commands
  /networks/{network_id}/gateways/{gateway_id}/description:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "200":
          description: The description of the gateway
          schema:
            $ref: ./orc8r-swagger-common.yml#/definitions/gateway_description
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the description of a gateway
      tags:
      - Gateways
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - in: body
        name: description
        required: true
        schema:
          $ref: ./orc8r-swagger-common.yml#/definitions/gateway_description
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the description of a gateway
      tags:
      - Gateways
  /networks/{network_id}/gateways/{gateway_id}/device:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "200":
          description: The physical device for the gateway
          schema:
            $ref: '#/definitions/gateway_device'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the physical device for a gateway
      tags:
      - Gateways
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - description: New device for the gateway
        in: body
        name: device
        required: true
        schema:
          $ref: '#/definitions/gateway_device'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the physical device for a gateway
      tags:
      - Gateways
  /networks/{network_id}/gateways/{gateway_id}/magmad:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "200":
          description: Magmad agent configuration
          schema:
            $ref: '#/definitions/magmad_gateway_configs'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get magmad agent configuration
      tags:
      - Gateways
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - description: New magmad configuration
        in: body
        name: magmad
        required: true
        schema:
          $ref: '#/definitions/magmad_gateway_configs'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Reconfigure magmad agent
      tags:
      - Gateways
  /networks/{network_id}/gateways/{gateway_id}/name:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "200":
          description: The name of the gateway
          schema:
            $ref: ./orc8r-swagger-common.yml#/definitions/gateway_name
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the name of a gateway
      tags:
      - Gateways
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - in: body
        name: name
        required: true
        schema:
          $ref: ./orc8r-swagger-common.yml#/definitions/gateway_name
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the name of a gateway
      tags:
      - Gateways
  /networks/{network_id}/gateways/{gateway_id}/status:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "200":
          description: The status of the gateway
          schema:
            $ref: '#/definitions/gateway_status'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the status of a gateway
      tags:
      - Gateways
  /networks/{network_id}/gateways/{gateway_id}/tier:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "200":
          description: The ID of the upgrade tier
          schema:
            $ref: '#/definitions/tier_id'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the ID of the upgrade tier a gateway belongs to
      tags:
      - Gateways
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      - in: body
        name: tier_id
        required: true
        schema:
          $ref: '#/definitions/tier_id'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the ID of the upgrade tier a gateway belongs to
      tags:
      - Gateways
  /networks/{network_id}/logs/count:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: Simple Query String to execute
        in: query
        name: simple_query
        required: false
        type: string
      - description: Comma-separated list of fields to search with the simple query.
          Defaults to the log field.
        in: query
        name: fields
        required: false
        type: string
      - description: Comma-separated list of key:value pairs to filter the query with.
        in: query
        name: filters
        required: false
        type: string
      - description: Time to start searching
        in: query
        name: start
        required: false
        type: string
      - description: Time to end searching
        in: query
        name: end
        required: false
        type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/elastic_hit_count'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Count logs
      tags:
      - Logs
  /networks/{network_id}/logs/search:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: Simple Query String to execute
        in: query
        name: simple_query
        required: false
        type: string
      - description: Comma-separated list of fields to search with the simple query.
          Defaults to the log field.
        in: query
        name: fields
        required: false
        type: string
      - description: Comma-separated list of key:value pairs to filter the query with.
        in: query
        name: filters
        required: false
        type: string
      - description: Maximum number of hits returned. Defaults to 10.
        in: query
        name: size
        required: false
        type: string
      - description: The starting offset to fetch from the search hits. This param
          along with size can be used for pagination.
        in: query
        name: from
        required: false
        type: string
      - description: Time to start searching
        in: query
        name: start
        required: false
        type: string
      - description: Time to end searching
        in: query
        name: end
        required: false
        type: string
      responses:
        "200":
          description: Success
          schema:
            items:
              $ref: '#/definitions/elastic_hit'
            type: array
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Search logs
      tags:
      - Logs
  /networks/{network_id}/name:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: Name of the network
          schema:
            $ref: ./orc8r-swagger-common.yml#/definitions/network_name
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the name of a network
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - in: body
        name: name
        required: true
        schema:
          $ref: ./orc8r-swagger-common.yml#/definitions/network_name
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the name of a network
      tags:
      - Networks
  /networks/{network_id}/sentry:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: Network-wide Sentry.io configuration
          schema:
            $ref: '#/definitions/network_sentry_config'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the Sentry.io configuration for network
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - in: body
        name: network_sentry_config
        required: true
        schema:
          $ref: '#/definitions/network_sentry_config'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the Sentry.io configuration for network
      tags:
      - Networks
  /networks/{network_id}/state:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: State configuration
          schema:
            $ref: '#/definitions/state_config'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the state configuration for network
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - in: body
        name: state_config
        required: true
        schema:
          $ref: '#/definitions/state_config'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the state configuration for network
      tags:
      - Networks
  /networks/{network_id}/tiers:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: List of tier IDs
          schema:
            example:
            - tier1
            - tier2
            items:
              $ref: '#/definitions/tier_id'
            type: array
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get a list of upgrade tiers
      tags:
      - Upgrades
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - description: Configuration of the tier to create
        in: body
        name: tier
        required: true
        schema:
          $ref: '#/definitions/tier'
      responses:
        "201":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Register a tier
      tags:
      - Upgrades
  /networks/{network_id}/tiers/{tier_id}:
    delete:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Delete upgrade tier
      tags:
      - Upgrades
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/tier'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get upgrade tier
      tags:
      - Upgrades
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - description: Configuration of the tier to update
        in: body
        name: tier
        required: true
        schema:
          $ref: '#/definitions/tier'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update upgrade tier
      tags:
      - Upgrades
  /networks/{network_id}/tiers/{tier_id}/gateways:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/tier_gateways'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get gateways of upgrade tier
      tags:
      - Upgrades
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - description: New gateway for the tier
        in: body
        name: Gateway
        required: true
        schema:
          $ref: ./orc8r-swagger-common.yml#/definitions/gateway_id
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Add a gateway to upgrade tier
      tags:
      - Upgrades
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - description: New images for the tier
        in: body
        name: tier
        required: true
        schema:
          $ref: '#/definitions/tier_gateways'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update upgrade tier gateways
      tags:
      - Upgrades
  /networks/{network_id}/tiers/{tier_id}/gateways/{gateway_id}:
    delete:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - $ref: ./orc8r-swagger-common.yml#/parameters/gateway_id
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Remove a gateway from tier
      tags:
      - Upgrades
  /networks/{network_id}/tiers/{tier_id}/images:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/tier_images'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get images of upgrade tier
      tags:
      - Upgrades
    post:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - description: New image for the tier
        in: body
        name: image
        required: true
        schema:
          $ref: '#/definitions/tier_image'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Add an image to upgrade tier
      tags:
      - Upgrades
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - description: New images for the tier
        in: body
        name: tier
        required: true
        schema:
          $ref: '#/definitions/tier_images'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update upgrade tier images
      tags:
      - Upgrades
  /networks/{network_id}/tiers/{tier_id}/images/{image_name}:
    delete:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - $ref: '#/parameters/image_name'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Remove an image from tier
      tags:
      - Upgrades
  /networks/{network_id}/tiers/{tier_id}/name:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/tier_name'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get name of upgrade tier
      tags:
      - Upgrades
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - description: New name for the tier
        in: body
        name: Name
        required: true
        schema:
          $ref: '#/definitions/tier_name'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update upgrade tier name
      tags:
      - Upgrades
  /networks/{network_id}/tiers/{tier_id}/version:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/tier_version'
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get version of upgrade tier
      tags:
      - Upgrades
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - $ref: '#/parameters/tier_id'
      - description: New version for the tier
        in: body
        name: Version
        required: true
        schema:
          $ref: '#/definitions/tier_version'
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update upgrade tier version
      tags:
      - Upgrades
  /networks/{network_id}/type:
    get:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      responses:
        "200":
          description: The type of the network
          schema:
            example: lte
            type: string
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Get the type of a network
      tags:
      - Networks
    put:
      parameters:
      - $ref: ./orc8r-swagger-common.yml#/parameters/network_id
      - in: body
        name: type
        required: true
        schema:
          example: lte
          minLength: 1
          type: string
      responses:
        "204":
          description: Success
        default:
          $ref: ./orc8r-swagger-common.yml#/responses/UnexpectedError
      summary: Update the type of a network
      tags:
      - Networks
responses: {}
parameters:
  channel_id:
    description: Release Channel ID
    in: path
    minLength: 1
    name: channel_id
    required: true
    type: string
  dns_domain:
    description: DNS record domain
    in: path
    name: domain
    required: true
    type: string
  image_name:
    description: Name of an image
    in: path
    minLength: 1
    name: image_name
    required: true
    type: string
  tier_id:
    description: Tier ID
    in: path
    minLength: 1
    name: tier_id
    required: true
    type: string
definitions:
  aggregation_logging_configs:
    description: Configuration for log aggregation
    properties:
      target_files_by_tag:
        additionalProperties:
          type: string
        example:
          enodebd: /var/log/enodebd.log
          mme: /var/log/mme.log
          otherlog: /var/log/otherlog.log
        type: object
      throttle_interval:
        example: 1m
        pattern: ^\d+(.\d+)?(s|m|h)$
        type: string
        x-nullable: true
      throttle_rate:
        example: 1000
        format: uint32
        type: integer
        x-nullable: true
      throttle_window:
        example: 5
        format: uint32
        type: integer
        x-nullable: true
    type: object
  challenge_key:
    properties:
      key:
        example: MHYwEAYHKoZIzj0CAQYFK4EEACIDYgAE+Lckvw/eeV8CemEOWpX30/5XhTHKx/mm6T9MpQWuIM8sOKforNm5UPbZrdOTPEBAtGwJB6Uk9crjCIveFe+sN0zw705L94Giza4ny/6ASBcctCm2JJxFccVsocJIraSC
        format: byte
        type: string
        x-nullable: true
      key_type:
        enum:
        - ECHO
        - SOFTWARE_ECDSA_SHA256
        example: SOFTWARE_ECDSA_SHA256
        type: string
        x-nullable: false
    required:
    - key_type
    type: object
  channel_id:
    example: stable
    minLength: 1
    pattern: ^[a-z][\da-z_]+$
    type: string
    x-nullable: false
  config_info:
    properties:
      mconfig_created_at:
        example: 1552968732
        format: uint64
        type: integer
    type: object
  disk_partition:
    properties:
      device:
        description: Name of the device
        example: /dev/sda1
        type: string
      free:
        description: Free disk space of the device in bytes
        example: 15482871808
        format: uint64
        type: integer
      mount_point:
        description: Mount point of the device
        example: /
        type: string
      total:
        description: Total disk space of the device in bytes
        example: 21378641920
        format: uint64
        type: integer
      used:
        description: Used disk space of the device in bytes
        example: 4809781248
        format: uint64
        type: integer
    type: object
  dns_config_record:
    description: Mapping used for DNS resolving from a domain
    properties:
      a_record:
        items:
          example: 192.88.99.142
          format: ipv4
          minLength: 1
          type: string
          x-nullable: false
        type: array
      aaaa_record:
        items:
          example: 2001:0db8:85a3:0000:0000:8a2e:0370:7334
          format: ipv6
          minLength: 1
          type: string
          x-nullable: false
        type: array
      cname_record:
        items:
          example: cname.example.com
          minLength: 1
          type: string
          x-nullable: false
        type: array
      domain:
        example: example.com
        minLength: 1
        type: string
        x-nullable: false
    required:
    - domain
    type: object
  elastic_hit:
    properties:
      _id:
        type: string
      _index:
        type: string
      _primary_term:
        type: string
      _score:
        type: number
      _seq_no:
        type: number
      _sort:
        items:
          type: number
        type: array
      _source:
        additionalProperties:
          type: string
        type: object
      _type:
        type: string
    required:
    - _index
    - _type
    - _id
    - _source
    type: object
  elastic_hit_count:
    type: number
  gateway_device:
    description: Information about the physical device corresponding to a gateway
    properties:
      hardware_id:
        example: 22ffea10-7fc4-4427-975a-b9e4ce8f6f4d
        minLength: 1
        type: string
        x-nullable: false
      key:
        $ref: '#/definitions/challenge_key'
    required:
    - hardware_id
    - key
    type: object
  gateway_logging_configs:
    description: Configuration for gateway logging (local and aggregation configs)
    properties:
      aggregation:
        $ref: '#/definitions/aggregation_logging_configs'
      event_verbosity:
        example: 0
        format: int32
        type: integer
        x-nullable: true
      log_level:
        enum:
        - DEBUG
        - INFO
        - WARNING
        - ERROR
        - FATAL
        type: string
    required:
    - log_level
    type: object
  gateway_status:
    properties:
      cert_expiration_time:
        example: 1234567890
        format: int64
        type: integer
      checkin_time:
        example: 1234567890
        format: uint64
        type: integer
      hardware_id:
        type: string
      kernel_version:
        description: deprecated
        example: 4.9.0-6-amd64
        type: string
      kernel_versions_installed:
        description: deprecated
        example:
        - 4.9.0-6-amd64
        - 4.9.0-7-amd64
        items:
          type: string
        type: array
        x-omitempty: true
      machine_info:
        $ref: '#/definitions/machine_info'
      meta:
        additionalProperties:
          type: string
        type: object
      platform_info:
        $ref: '#/definitions/platform_info'
      system_status:
        $ref: '#/definitions/system_status'
      version:
        description: deprecated
        type: string
      vpn_ip:
        description: deprecated
        example: 10.0.0.1
        type: string
    type: object
  gateway_vpn_configs:
    description: Configuration for gateway VPN access
    properties:
      enable_shell:
        example: false
        type: boolean
    required:
    - enable_shell
    type: object
  generic_command_params:
    properties:
      command:
        example: bash
        minLength: 1
        type: string
      params:
        additionalProperties:
          type: object
        example:
          shell_params:
          - -c 'ls -1 .'
        type: object
    required:
    - command
    type: object
  generic_command_response:
    properties:
      response:
        additionalProperties:
          type: object
        example: {}
        type: object
    type: object
  machine_info:
    properties:
      cpu_info:
        properties:
          architecture:
            example: x86_64
            type: string
          core_count:
            example: 4
            format: uint64
            type: integer
          model_name:
            example: Intel(R) Core(TM) i9-8950HK CPU @ 2.90GHz
            type: string
          threads_per_core:
            example: 1
            format: uint64
            type: integer
        type: object
      network_info:
        properties:
          network_interfaces:
            items:
              $ref: '#/definitions/network_interface'
            type: array
            x-omitempty: true
          routing_table:
            items:
              $ref: '#/definitions/route'
            type: array
            x-omitempty: true
        type: object
    type: object
  magmad_gateway:
    description: Full representation of a generic gateway
    properties:
      description:
        $ref: ./orc8r-swagger-common.yml#/definitions/gateway_description
      device:
        $ref: '#/definitions/gateway_device'
      id:
        $ref: ./orc8r-swagger-common.yml#/definitions/gateway_id
      magmad:
        $ref: '#/definitions/magmad_gateway_configs'
      name:
        $ref: ./orc8r-swagger-common.yml#/definitions/gateway_name
      status:
        $ref: '#/definitions/gateway_status'
      tier:
        $ref: '#/definitions/tier_id'
    required:
    - device
    - id
    - name
    - description
    - magmad
    - tier
    type: object
  magmad_gateway_configs:
    description: Configuration for the magmad gateway agent
    properties:
      autoupgrade_enabled:
        example: true
        type: boolean
      autoupgrade_poll_interval:
        example: 300
        format: int32
        minimum: 30
        type: integer
        x-nullable: false
      checkin_interval:
        example: 60
        format: uint32
        minimum: 15
        type: integer
        x-nullable: false
      checkin_timeout:
        example: 10
        format: uint32
        minimum: 5
        type: integer
        x-nullable: false
      dynamic_services:
        example: []
        items:
          minLength: 1
          type: string
          x-nullable: false
        type: array
      feature_flags:
        additionalProperties:
          type: boolean
        example:
          newfeature1: true
          newfeature2: false
        type: object
      logging:
        $ref: '#/definitions/gateway_logging_configs'
      vpn:
        $ref: '#/definitions/gateway_vpn_configs'
    required:
    - autoupgrade_enabled
    - autoupgrade_poll_interval
    - checkin_interval
    - checkin_timeout
    type: object
  network:
    description: Orchestrator network spec
    properties:
      description:
        $ref: ./orc8r-swagger-common.yml#/definitions/network_description
      dns:
        $ref: '#/definitions/network_dns_config'
      features:
        $ref: '#/definitions/network_features'
      id:
        $ref: ./orc8r-swagger-common.yml#/definitions/network_id
      name:
        $ref: ./orc8r-swagger-common.yml#/definitions/network_name
      sentry_config:
        $ref: '#/definitions/network_sentry_config'
      state_config:
        $ref: '#/definitions/state_config'
      type:
        $ref: ./orc8r-swagger-common.yml#/definitions/network_type
    required:
    - id
    - name
    - description
    - dns
    type: object
  network_dns_config:
    description: DNS configuration for a network
    properties:
      dhcp_server_enabled:
        example: true
        type: boolean
      enable_caching:
        example: false
        type: boolean
      local_ttl:
        example: 0
        format: uint32
        type: integer
      records:
        $ref: '#/definitions/network_dns_records'
    required:
    - enable_caching
    - local_ttl
    type: object
  network_dns_records:
    items:
      $ref: '#/definitions/dns_config_record'
    type: array
  network_features:
    description: Feature flags for a network
    properties:
      features:
        additionalProperties:
          type: string
        example:
          featureName1: featureProp1
          featureName2: featureProp2
        type: object
    type: object
  network_interface:
    properties:
      ip_addresses:
        example:
        - 10.10.10.1
        - 10.0.0.1
        items:
          type: string
        type: array
        x-go-custom-tag: magma_alt_name:"IpAddresses"
        x-omitempty: true
      ipv6_addresses:
        example:
        - fe80::a00:27ff:fe1e:8332
        - fe80::a00:27ff:fe1e:8432
        items:
          type: string
        type: array
        x-go-custom-tag: magma_alt_name:"Ipv6Addresses"
        x-omitempty: true
      mac_address:
        example: 08:00:27:1e:8a:32
        type: string
      network_interface_id:
        example: gtp_br0
        type: string
        x-go-custom-tag: magma_alt_name:"NetworkInterfaceId"
      status:
        enum:
        - UP
        - DOWN
        - UNKNOWN
        example: UP
        type: string
    type: object
  network_sentry_config:
    description: Sentry.io configuration
    properties:
      sample_rate:
        example: 0.5
        format: float
        maximum: 1
        minimum: 0
        type: number
      upload_mme_log:
        example: false
        type: boolean
      url_native:
        example: https://examplePublicKey@o0.ingest.sentry.io/0
        format: uri
        minLength: 0
        type: string
        x-nullable: false
      url_python:
        example: https://examplePublicKey@o0.ingest.sentry.io/0
        format: uri
        minLength: 0
        type: string
        x-nullable: false
    type: object
  package:
    properties:
      name:
        example: magma
        type: string
      version:
        example: 0.0.0
        type: string
    type: object
  paginated_gateways:
    description: Page of gateways
    properties:
      gateways:
        additionalProperties:
          $ref: '#/definitions/magmad_gateway'
          x-nullable: true
        type: object
      page_token:
        $ref: ./orc8r-swagger-common.yml#/definitions/page_token
      total_count:
        description: Estimated total number of gateways
        example: 10
        format: int64
        type: integer
        x-nullable: false
    required:
    - page_token
    - gateways
    - total_count
    type: object
  ping_request:
    properties:
      hosts:
        example:
        - example.com
        items:
          type: string
        type: array
      packets:
        default: 4
        example: 4
        format: int32
        minimum: 1
        type: integer
    required:
    - hosts
    type: object
  ping_response:
    properties:
      pings:
        items:
          $ref: '#/definitions/ping_result'
        type: array
    required:
    - pings
    type: object
  ping_result:
    properties:
      avg_response_ms:
        example: 35.69900131225586
        format: float
        type: number
      error:
        example: error
        type: string
      host_or_ip:
        example: example.com
        minLength: 1
        type: string
      num_packets:
        example: 4
        format: int32
        type: integer
      packets_received:
        example: 4
        format: int32
        type: integer
      packets_transmitted:
        example: 4
        format: int32
        type: integer
    required:
    - host_or_ip
    - num_packets
    type: object
  platform_info:
    properties:
      config_info:
        $ref: '#/definitions/config_info'
      kernel_version:
        example: 4.9.0-6-amd64
        type: string
      kernel_versions_installed:
        example:
        - 4.9.0-6-amd64
        - 4.9.0-7-amd64
        items:
          type: string
        type: array
        x-omitempty: true
      packages:
        items:
          $ref: '#/definitions/package'
        type: array
        x-omitempty: true
      vpn_ip:
        example: 10.0.0.1
        type: string
        x-go-custom-tag: magma_alt_name:"VpnIp"
    type: object
  release_channel:
    properties:
      id:
        $ref: '#/definitions/channel_id'
      name:
        type: string
      supported_versions:
        items:
          type: string
        type: array
    required:
    - id
    - supported_versions
    type: object
    x-nullable: false
  route:
    properties:
      destination_ip:
        example: 0.0.0.0
        type: string
        x-go-custom-tag: magma_alt_name:"DestinationIp"
      gateway_ip:
        example: 10.10.10.1
        type: string
        x-go-custom-tag: magma_alt_name:"GatewayIp"
      genmask:
        example: 255.255.255.0
        type: string
      network_interface_id:
        example: gtp_br0
        type: string
        x-go-custom-tag: magma_alt_name:"NetworkInterfaceId"
    type: object
  state_config:
    description: State configuration
    properties:
      sync_interval:
        description: Sync interval in seconds
        example: 60
        format: uint32
        minimum: 3
        type: number
    type: object
  system_status:
    properties:
      cpu_idle:
        format: uint64
        type: integer
        x-go-custom-tag: magma_alt_name:"CpuIdle"
      cpu_system:
        format: uint64
        type: integer
        x-go-custom-tag: magma_alt_name:"CpuSystem"
      cpu_user:
        format: uint64
        type: integer
        x-go-custom-tag: magma_alt_name:"CpuUser"
      disk_partitions:
        items:
          $ref: '#/definitions/disk_partition'
        type: array
        x-omitempty: true
      mem_available:
        format: uint64
        type: integer
      mem_free:
        format: uint64
        type: integer
      mem_total:
        format: uint64
        type: integer
      mem_used:
        format: uint64
        type: integer
      swap_free:
        format: uint64
        type: integer
      swap_total:
        format: uint64
        type: integer
      swap_used:
        format: uint64
        type: integer
      time:
        example: 1234567000
        format: uint64
        type: integer
      uptime_secs:
        example: 12345
        format: uint64
        type: integer
    type: object
  tail_logs_request:
    properties:
      service:
        example: magmad
        minLength: 1
        type: string
    type: object
  tier:
    properties:
      gateways:
        $ref: '#/definitions/tier_gateways'
      id:
        $ref: '#/definitions/tier_id'
      images:
        $ref: '#/definitions/tier_images'
      name:
        $ref: '#/definitions/tier_name'
      version:
        $ref: '#/definitions/tier_version'
    required:
    - id
    - version
    - images
    - gateways
    type: object
  tier_gateways:
    items:
      $ref: ./orc8r-swagger-common.yml#/definitions/gateway_id
    type: array
    uniqueItems: true
  tier_id:
    example: default
    pattern: ^[a-z][\da-z_]+$
    type: string
    x-nullable: false
  tier_image:
    properties:
      name:
        type: string
      order:
        type: integer
    required:
    - name
    - order
    type: object
  tier_images:
    items:
      $ref: '#/definitions/tier_image'
    type: array
  tier_name:
    example: Default Tier
    type: string
  tier_version:
    example: 0.3.14-123456789-deadbeef
    minLength: 1
    type: string
  version_info:
    properties:
      container_image_version:
        example: 1.6.0
        type: string
      helm_chart_version:
        example: 1.5.21
        type: string
    type: object
